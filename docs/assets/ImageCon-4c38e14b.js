import{_ as T,L as C,aa as D,n as w}from"./index-7b9a30c5.js";import{b8 as g,b2 as L,bI as B,b0 as l,cg as j,cB as x,aR as v,aS as h,by as F,bs as b,bR as N,bA as m,bp as P,bw as R,cY as V,cZ as z,aT as A}from"./vendor-a6581121.js";const M="https://kooritea.moe/assets/404.png";const W={components:{LoadingIcon:C},directives:{imgFadeEnter:D},props:{loading:{type:Boolean,default:()=>!0},src:{type:String,default:()=>""},alt:{type:String,default:()=>""},source:{type:String,default:()=>"jsdelivr"},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0}},setup(t,{emit:r,attrs:o}){const{computedLoading:e,computedSrc:c,computedLoadingDelay:d}=w(t,r),n=g(0),i=g(!0),a=g(null),f=()=>{i.value=!0,a.value&&clearTimeout(a.value),a.value=setTimeout(()=>{i.value=!1},d.value)};f(),L(c,()=>{n.value=0,e.value=!0,f()});const p=B(t.source==="static"?[]:["https://gcore.jsdelivr.net/gh","https://testingcf.jsdelivr.net/gh","https://cdn.jsdelivr.net/gh","https://fastly.jsdelivr.net/gh","https://raw.githubusercontent.com"]),y=l(()=>t.src.startsWith("http")?[t.src]:p.length>0?p.map(s=>s+c.value):[c.value]),_=l(()=>y.value[n.value]),u=l(()=>n.value>=y.value.length),E=l(()=>u.value?"/assets/404.png":_.value);L(u,s=>{s&&(e.value=!1,typeof o.onError=="function"&&o.onError())});const S=s=>{e.value=!1,typeof o.onLoad=="function"&&o.onLoad(s)},I=s=>{n.value++},k=l(()=>e.value||i.value);return{computedLoadingDelay:d,isLoading:k,imageSrc:_,isError:u,onLoad:S,onError:I,applySrc:E}}},Y=t=>(V("data-v-c095ba50"),t=t(),z(),t),Z=["src","alt","title"],q=Y(()=>A("img",{class:"img",src:M},null,-1));function G(t,r,o,e,c,d){const n=j("LoadingIcon"),i=x("imgFadeEnter");return v(),h("div",{class:b(["image",{["loading-type-"+o.loadingType]:!0,error:e.isError,loading:e.isLoading}])},[e.isError?m("",!0):F((v(),h("img",{key:0,class:b(["img",{loading:e.isLoading}]),src:e.imageSrc,alt:o.alt,title:o.alt,onLoad:r[0]||(r[0]=(...a)=>e.onLoad&&e.onLoad(...a)),onError:r[1]||(r[1]=(...a)=>e.onError&&e.onError(...a)),onDragstart:r[2]||(r[2]=N(()=>{},["prevent"]))},null,42,Z)),[[i,o.loadingType==="fade",e.computedLoadingDelay]]),e.isError?P(t.$slots,"error",{key:1},()=>[q],!0):m("",!0),e.isLoading&&o.loadingType==="icon"?(v(),R(n,{key:2})):m("",!0)],2)}const K=T(W,[["render",G],["__scopeId","data-v-c095ba50"]]);export{K as I};
