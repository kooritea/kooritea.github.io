import{_ as C,L as D,aa as T,u as x,n as w}from"./index-6dfeff5e.js";import{b7 as v,b1 as h,bH as F,a$ as l,cf as N,cA as z,aQ as m,aR as E,bx as A,br as b,bQ as P,bz as f,bo as Q,bv as U,cX as V,cY as H,aS as M}from"./vendor-23d2f8cc.js";const R="https://kooritea.moe/assets/404.png";const W={components:{LoadingIcon:D},directives:{imgFadeEnter:T},props:{loading:{type:Boolean,default:()=>!0},src:{type:String,default:()=>""},alt:{type:String,default:()=>""},source:{type:String,default:()=>"jsdelivr"},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0}},setup(t,{emit:r,attrs:o}){const{jsdelivrBaseUrl:e}=x(),{computedLoading:i,computedSrc:c,computedLoadingDelay:d}=w(t,r),n=v(0),a=v(!0),u=v(null),p=()=>{a.value=!0,u.value&&clearTimeout(u.value),u.value=setTimeout(()=>{a.value=!1},d.value)};p(),h(c,()=>{n.value=0,i.value=!0,p()});const S=e.value?[e.value]:"https://gcore.jsdelivr.net/gh,https://testingcf.jsdelivr.net/gh,https://cdn.jsdelivr.net/gh,https://fastly.jsdelivr.net/gh".split(","),y=F(t.source==="static"?[]:S),_=l(()=>t.src.startsWith("http")?[t.src]:y.length>0?y.map(s=>s+c.value):[c.value]),L=l(()=>_.value[n.value]),g=l(()=>n.value>=_.value.length),I=l(()=>g.value?"/assets/404.png":L.value);h(g,s=>{s&&(i.value=!1,typeof o.onError=="function"&&o.onError())});const k=s=>{i.value=!1,typeof o.onLoad=="function"&&o.onLoad(s)},j=s=>{n.value++},B=l(()=>i.value||a.value);return{computedLoadingDelay:d,isLoading:B,imageSrc:L,isError:g,onLoad:k,onError:j,applySrc:I}}},X=t=>(V("data-v-99b05828"),t=t(),H(),t),Y=["src","alt","title"],q=X(()=>M("img",{class:"img",src:R},null,-1));function G(t,r,o,e,i,c){const d=N("LoadingIcon"),n=z("imgFadeEnter");return m(),E("div",{class:b(["image",{["loading-type-"+o.loadingType]:!0,error:e.isError,loading:e.isLoading}])},[e.isError?f("",!0):A((m(),E("img",{key:0,class:b(["img",{loading:e.isLoading}]),src:e.imageSrc,alt:o.alt,title:o.alt,onLoad:r[0]||(r[0]=(...a)=>e.onLoad&&e.onLoad(...a)),onError:r[1]||(r[1]=(...a)=>e.onError&&e.onError(...a)),onDragstart:r[2]||(r[2]=P(()=>{},["prevent"]))},null,42,Y)),[[n,o.loadingType==="fade",e.computedLoadingDelay]]),e.isError?Q(t.$slots,"error",{key:1},()=>[q],!0):f("",!0),e.isLoading&&o.loadingType==="icon"?(m(),U(d,{key:2})):f("",!0)],2)}const O=C(W,[["render",G],["__scopeId","data-v-99b05828"]]);export{O as I};
