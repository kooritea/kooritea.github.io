import{P as x}from"./PageHeader-dd70e70f.js";import{_ as y,T as f,A as g,u as V,b,M as P}from"./index-0464fc9c.js";import{l as B}from"./GreatOldOne-ed407236.js";import{ap as w,aC as C,r as i,ai as c,o as h,e as k,Z as n,f as v,X as A,aD as I,ag as T}from"./vendor-eddec4a0.js";import"./element-plus-e4e3d2c3.js";import"./highlightjs-b0208cd2.js";const E={components:{PageHeader:x,TextInput:f,AsyncButtom:g},setup(){const{temporaryPublicKey:u}=V(),{usernameCache:e,accessKey:l,accessExp:o,isExpiredGreatOldOne:p}=b(),{query:d}=w(),r=C(),s=i(e.value),a=i("");return{username:s,password:a,access:()=>{const m=new I;return m.setPublicKey(u.value),B(s.value,m.encrypt(a.value)).then(_=>{P.success("认证成功"),l.value=_.token,o.value=_.exp,p.value=!0,e.value=s.value,r.push({path:d.redirect||"/great-old-one/index"})})}}}},H={class:"page"},K={class:"login-box"},N={class:"button-box"};function M(u,e,l,o,p,d){const r=c("PageHeader"),s=c("TextInput"),a=c("AsyncButtom");return h(),k("div",H,[n(r),v("div",K,[n(s,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),border:""},null,8,["modelValue"]),n(s,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),border:"",type:"password"},null,8,["modelValue"]),v("div",N,[n(a,{"on-click":o.access},{default:A(()=>[T("契约")]),_:1},8,["on-click"])])])])}const G=y(E,[["render",M],["__scopeId","data-v-437594a8"]]);export{G as default};
