import{_ as B,B as v,j as M,A as O,M as P}from"./index-974cf1e4.js";import{P as E,d as w,e as F}from"./GreatOldOne-35c71b31.js";import{b as S,c as G,d as R,e as j,f as A,g as C,h as N}from"./element-plus-79f2d866.js";import{aU as U,cd as r,aL as s,bo as f,bp as d,aM as y,bP as q,br as l,bl as k,bQ as b,bm as I,bx as x,aN as H}from"./vendor-8a5307be.js";import"./highlightjs-4914df6f.js";const T={components:{ElForm:S,ElFormItem:G,ElInput:R,ElRadioGroup:j,ElRadio:A,ButtonBox:v},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(a,{emit:t}){const u=U(null),{computedModelValue:e}=M(a,t);return{computedModelValue:e,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(c=>{u.value.validate((p,i)=>{p&&(typeof a.onSubmit=="function"?c(a.onSubmit(e.value)):c())})})}],form:u}}};function K(a,t,u,e,m,c){const p=r("el-input"),i=r("el-radio"),h=r("el-radio-group"),_=r("el-form-item"),g=r("ButtonBox"),n=r("el-form");return s(),f(n,{ref:"form",model:e.computedModelValue,"label-position":"top"},{default:d(()=>[(s(!0),y(I,null,q(u.fields,o=>(s(),y("div",{key:o.prop},[l(_,{label:o.label,prop:o.prop,required:o.required},{default:d(()=>[o.type==="input"?(s(),f(p,{key:0,modelValue:e.computedModelValue[o.prop],"onUpdate:modelValue":V=>e.computedModelValue[o.prop]=V},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),o.type==="boolean"?(s(),f(h,{key:1,modelValue:e.computedModelValue[o.prop],"onUpdate:modelValue":V=>e.computedModelValue[o.prop]=V},{default:d(()=>[l(i,{border:"",label:!0},{default:d(()=>[b("是")]),_:1}),l(i,{border:"",label:!1},{default:d(()=>[b("否")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},1032,["label","prop","required"])]))),128)),e.handlers.length>0?(s(),f(g,{key:0,handlers:e.handlers},null,8,["handlers"])):k("",!0)]),_:1},8,["model"])}const L=B(T,[["render",K]]);const z={components:{AsyncButtom:O,PageHeader:E,GOOMabinogionFields:L,ElTable:C,ElTableColumn:N},setup(){const a=x([]),t=x([]),u=()=>F().then(e=>{t.splice(0,t.length),t.push(...e);for(const m of t)m.fields.length<5&&a.push(m.uuid)});return u(),{expandRowKeys:a,realtodos:t,load:u}},methods:{onSubmit(a,t){return w(a.row.uuid,{type:"resolve",data:t}).then(()=>(P.success("处理成功"),this.load()))},reject(a,t){return w(a.row.uuid,{type:"reject",reason:t.inputValue}).then(()=>this.load())}}},Q={class:"page"},D={class:"preview"},J={key:0,class:"quick-boolean"};function W(a,t,u,e,m,c){const p=r("PageHeader"),i=r("AsyncButtom"),h=r("GOOMabinogionFields"),_=r("el-table-column"),g=r("el-table");return s(),y("div",Q,[l(p),l(g,{border:"",data:e.realtodos,style:{width:"100%"},"row-key":"uuid","expand-row-keys":e.expandRowKeys},{default:d(()=>[l(_,{type:"expand"},{default:d(n=>[H("div",D,[n.row.fields.length===1&&n.row.fields[0].type==="boolean"?(s(),y("div",J,[l(i,{type:"primary","on-click":()=>c.onSubmit(n,{[n.row.fields[0].prop]:!0})},{default:d(()=>[b(" 是 ")]),_:2},1032,["on-click"]),l(i,{type:"default","on-click":()=>c.onSubmit(n,{[n.row.fields[0].prop]:!1})},{default:d(()=>[b(" 否 ")]),_:2},1032,["on-click"])])):(s(),f(h,{key:1,fields:n.row.fields,"on-submit":o=>c.onSubmit(n,o)},null,8,["fields","on-submit"]))])]),_:1}),l(_,{prop:"name",label:"描述"}),l(_,{label:"操作",width:"120px"},{default:d(n=>[l(i,{type:"danger",size:"mini","on-click":o=>c.reject(n,o),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:d(()=>[b(" 拒绝 ")]),_:2},1032,["on-click"])]),_:1})]),_:1},8,["data","expand-row-keys"])])}const oe=B(z,[["render",W],["__scopeId","data-v-ce37a7c0"]]);export{oe as default};
