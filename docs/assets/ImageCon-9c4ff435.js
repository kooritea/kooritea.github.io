import{_ as C,L as D,p as I,a as T}from"./index-4d518520.js";import{r as m,p as L,l as u,az as B,aA as w,o as c,e as f,S as F,W as E,$ as h,U as y,X as z}from"./vendor-dfc99adc.js";const N="https://kooritea.moe/assets/404.png";const b={components:{LoadingIcon:D},directives:{imgFadeEnter:I},props:{loading:{type:Boolean,default:()=>!0},src:{type:[String,Array],default:()=>""},alt:{type:String,default:()=>""},prefix:{type:[String,Array],default:()=>""},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0}},setup(n,{emit:a,attrs:r}){const{computedLoading:e,computedSrc:t,computedLoadingDelay:d}=T(n,a),l=m(0),s=m(!0),i=m(null),v=()=>{s.value=!0,i.value&&clearTimeout(i.value),i.value=setTimeout(()=>{s.value=!1},d.value)};v(),L(t,()=>{l.value=0,e.value=!0,v()});const p=u(()=>Array.isArray(t.value)?Array.isArray(n.prefix)?t.value:t.value.map(o=>n.prefix+o):Array.isArray(n.prefix)?n.prefix.map(o=>o+t.value):[n.prefix+t.value]),_=u(()=>p.value[l.value]),g=u(()=>l.value>=p.value.length),k=u(()=>g.value?"/assets/404.png":_.value);L(g,o=>{o&&(e.value=!1,typeof r.onError=="function"&&r.onError())});const x=o=>{e.value=!1,typeof r.onLoad=="function"&&r.onLoad(o)},A=o=>{l.value++},S=u(()=>e.value||s.value);return{computedLoadingDelay:d,delayLoading:S,imageSrc:_,isError:g,onLoad:x,onError:A,applySrc:k}}},M=["src","alt"],P={key:1,class:"img",src:N};function U(n,a,r,e,t,d){const l=B("LoadingIcon"),s=w("imgFadeEnter");return c(),f("div",{class:E(["image",{["loading-type-"+r.loadingType]:!0,error:e.isError,loading:e.delayLoading}])},[e.isError?y("",!0):F((c(),f("img",{key:0,class:E(["img",{loading:e.delayLoading}]),src:e.imageSrc,alt:r.alt,onLoad:a[0]||(a[0]=(...i)=>e.onLoad&&e.onLoad(...i)),onError:a[1]||(a[1]=(...i)=>e.onError&&e.onError(...i)),onDragstart:a[2]||(a[2]=h(()=>{},["prevent"]))},null,42,M)),[[s,r.loadingType==="fade",e.computedLoadingDelay]]),e.isError?(c(),f("img",P)):y("",!0),e.delayLoading&&r.loadingType==="icon"?(c(),z(l,{key:2})):y("",!0)],2)}const X=C(b,[["render",U],["__scopeId","data-v-fcc0ce67"]]);export{X as I};
