import{_ as v,B,j as M,A as O,M as P}from"./index-27b101af.js";import{P as E}from"./PageHeader-7d6d8c4d.js";import{c as F,d as R,e as S,f as j,g as A,h as G,i as C}from"./element-plus-966ba156.js";import{b2 as q,ch as r,aP as u,bv as f,bu as d,aQ as y,b_ as I,bo as l,bA as k,by as b,bp as N,bj as w,aR as U}from"./vendor-b07f99b0.js";import{f as x,h as H}from"./GreatOldOne-1ef1fccb.js";import"./highlightjs-4914df6f.js";const T={components:{ElForm:F,ElFormItem:R,ElInput:S,ElRadioGroup:j,ElRadio:A,ButtonBox:B},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(n,{emit:t}){const s=q(null),{computedModelValue:e}=M(n,t);return{computedModelValue:e,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(c=>{s.value.validate((p,i)=>{p&&(typeof n.onSubmit=="function"?c(n.onSubmit(e.value)):c())})})}],form:s}}};function K(n,t,s,e,m,c){const p=r("el-input"),i=r("el-radio"),h=r("el-radio-group"),_=r("el-form-item"),g=r("ButtonBox"),a=r("el-form");return u(),f(a,{ref:"form",model:e.computedModelValue,"label-position":"top"},{default:d(()=>[(u(!0),y(N,null,I(s.fields,o=>(u(),y("div",{key:o.prop},[l(_,{label:o.label,prop:o.prop,required:o.required},{default:d(()=>[o.type==="input"?(u(),f(p,{key:0,modelValue:e.computedModelValue[o.prop],"onUpdate:modelValue":V=>e.computedModelValue[o.prop]=V},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),o.type==="boolean"?(u(),f(h,{key:1,modelValue:e.computedModelValue[o.prop],"onUpdate:modelValue":V=>e.computedModelValue[o.prop]=V},{default:d(()=>[l(i,{border:"",label:!0},{default:d(()=>[b(" 是 ")]),_:1}),l(i,{border:"",label:!1},{default:d(()=>[b(" 否 ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},1032,["label","prop","required"])]))),128)),e.handlers.length>0?(u(),f(g,{key:0,handlers:e.handlers},null,8,["handlers"])):k("",!0)]),_:1},8,["model"])}const z=v(T,[["render",K]]);const L={components:{AsyncButtom:O,PageHeader:E,GOOMabinogionFields:z,ElTable:G,ElTableColumn:C},setup(){const n=w([]),t=w([]),s=()=>H().then(e=>{t.splice(0,t.length),t.push(...e);for(const m of t)m.fields.length<5&&n.push(m.uuid)});return s(),{expandRowKeys:n,realtodos:t,load:s}},methods:{onSubmit(n,t){return x(n.row.uuid,{type:"resolve",data:t}).then(()=>(P.success("处理成功"),this.load()))},reject(n,t){return x(n.row.uuid,{type:"reject",reason:t.inputValue}).then(()=>this.load())}}},Q={class:"page"},D={class:"preview"},J={key:0,class:"quick-boolean"};function W(n,t,s,e,m,c){const p=r("PageHeader"),i=r("AsyncButtom"),h=r("GOOMabinogionFields"),_=r("el-table-column"),g=r("el-table");return u(),y("div",Q,[l(p),l(g,{border:"",data:e.realtodos,style:{width:"100%"},"row-key":"uuid","expand-row-keys":e.expandRowKeys},{default:d(()=>[l(_,{type:"expand"},{default:d(a=>[U("div",D,[a.row.fields.length===1&&a.row.fields[0].type==="boolean"?(u(),y("div",J,[l(i,{type:"primary","on-click":()=>c.onSubmit(a,{[a.row.fields[0].prop]:!0})},{default:d(()=>[b(" 是 ")]),_:2},1032,["on-click"]),l(i,{type:"default","on-click":()=>c.onSubmit(a,{[a.row.fields[0].prop]:!1})},{default:d(()=>[b(" 否 ")]),_:2},1032,["on-click"])])):(u(),f(h,{key:1,fields:a.row.fields,"on-submit":o=>c.onSubmit(a,o)},null,8,["fields","on-submit"]))])]),_:1}),l(_,{prop:"name",label:"描述"}),l(_,{label:"操作",width:"120px"},{default:d(a=>[l(i,{type:"danger",size:"mini","on-click":o=>c.reject(a,o),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:d(()=>[b(" 拒绝 ")]),_:2},1032,["on-click"])]),_:1})]),_:1},8,["data","expand-row-keys"])])}const te=v(L,[["render",W],["__scopeId","data-v-0bbb98f7"]]);export{te as default};
