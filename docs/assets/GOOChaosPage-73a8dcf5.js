import{_ as x,x as E,M as c,y as p}from"./index-7b9a30c5.js";import{P as y}from"./PageHeader-b5f3a320.js";import{M as g,u as H}from"./MDEditor-c4f1151b.js";import{b8 as d,bI as v,cg as _,aR as b,aS as P,bD as V,bw as M,bA as D}from"./vendor-a6581121.js";import"./element-plus-5d967f66.js";import"./highlightjs-4914df6f.js";import"./MarkDown-0cdbdd4a.js";import"./ImageCon-4c38e14b.js";const A={components:{PageHeader:y,MDEditor:g},setup(k){const a=d(!1),l=d(null),e=d(null),s=d(""),o=d(""),m=r=>{const u=r==="white"?l:e;return v([{name:()=>"插入媒体",type:"default",sort:1,handler:()=>{E({title:"插入媒体内容",showInput:!0,inputType:"textarea",confirmHandlerPromise:h=>{var f;const w=(f=h.inputValue.match(/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g))==null?void 0:f[0],t=new URL(w);if(t.host.includes("music")&&t.host.includes("163")){if(t.host==="music.163.com"){const n=t.href.match(/id=(\d+)/)[1];u.value.insertText(`[music ${n}]`);return}if(t.host==="y.music.163.com"){const n=t.pathname.match(/(\d+)\/?$/)[1];u.value.insertText(`[music ${n}]`);return}}if(t.host.includes("bilibili")){const n=t.href.match(/(BV|AV|av|bv)([a-z0-9A-Z]+)/)[0];u.value.insertText(`[bilibili ${n}]`);return}if(t.host.includes("youtube")){const n=t.pathname.slice(t.pathname.lastIndexOf("/")+1);u.value.insertText(`[youtube ${n}]`);return}throw new Error},errorHanlder(h){c.error("没有匹配的媒体类型")}})}}])},i=v([{name:()=>a.value?"关闭深色模式":"深色模式",type:"default",sort:30,handler:()=>{a.value=!a.value}},{name:"提交预约",type:"primary",sort:40,handler:()=>{H(r=>p(s.value,a.value&&o.value?o.value:void 0,r.value).then(()=>{c.success("预约成功")}).then(()=>{l.value.submitHandler(),e.value&&e.value.submitHandler()}))}},{name:"提交",type:"primary",sort:40,handler:()=>{if(!s.value){c.warning("正文内容不能为空");return}return p(s.value,a.value&&o.value?o.value:void 0).then(()=>{c.success("发表成功")}).then(()=>{l.value.submitHandler(),e.value&&e.value.submitHandler()})}}]);return{addDarkMode:a,handlers:i,getPublicHandlers:m,whiteEditor:l,darkEditor:e,whiteEditorValue:s,darkEditorValue:o}}},B={class:"page"};function O(k,a,l,e,s,o){const m=_("PageHeader"),i=_("MDEditor");return b(),P("div",B,[V(m),V(i,{ref:"whiteEditor",modelValue:e.whiteEditorValue,"onUpdate:modelValue":a[0]||(a[0]=r=>e.whiteEditorValue=r),cache:"white-mode","show-default-handlers":["reset","clean"],"ex-handlers":[...e.getPublicHandlers("white"),...e.addDarkMode?[]:e.handlers]},null,8,["modelValue","ex-handlers"]),e.addDarkMode?(b(),M(i,{key:0,ref:"darkEditor",modelValue:e.darkEditorValue,"onUpdate:modelValue":a[1]||(a[1]=r=>e.darkEditorValue=r),cache:"dark-mode",title:"深色模式内容","show-default-handlers":["reset","clean"],"ex-handlers":[...e.getPublicHandlers("dark"),...e.addDarkMode?e.handlers:[]]},null,8,["modelValue","ex-handlers"])):D("",!0)])}const R=x(A,[["render",O],["__scopeId","data-v-7f8150e5"]]);export{R as default};
