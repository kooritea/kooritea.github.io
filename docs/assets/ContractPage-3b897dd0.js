import{P as x,l as y}from"./GreatOldOne-b84ab02c.js";import{_ as g,T as f,A as b,u as V,a as P,M as k}from"./index-4ba0857e.js";import{ck as B,ct as w,a_ as i,cd as r,aL as h,aM as A,bk as n,aN as v,bq as C,cu as I,bu as T}from"./vendor-181cef01.js";import"./element-plus-c9c19afe.js";import"./highlightjs-4914df6f.js";const E={components:{PageHeader:x,TextInput:f,AsyncButtom:b},setup(){const{temporaryPublicKey:u}=V(),{usernameCache:e,accessKey:l,accessExp:o,isExpiredGreatOldOne:d}=P(),{query:p}=B(),c=w(),s=i(e.value),a=i("");return{username:s,password:a,access:()=>{const _=new I;return _.setPublicKey(u.value),y(s.value,_.encrypt(a.value)).then(m=>{k.success("认证成功"),l.value=m.token,o.value=m.exp,d.value=!0,e.value=s.value,c.push({path:p.redirect||"/great-old-one/index"})})}}}},N={class:"page"},H={class:"login-box"},K={class:"button-box"};function M(u,e,l,o,d,p){const c=r("PageHeader"),s=r("TextInput"),a=r("AsyncButtom");return h(),A("div",N,[n(c),v("div",H,[n(s,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),border:""},null,8,["modelValue"]),n(s,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),border:"",type:"password"},null,8,["modelValue"]),v("div",K,[n(a,{"on-click":o.access},{default:C(()=>[T("契约")]),_:1},8,["on-click"])])])])}const U=g(E,[["render",M],["__scopeId","data-v-437594a8"]]);export{U as default};
