import{_ as V,B as x,a as v,A as M,M as O}from"./index-dfac2523.js";import{P as w}from"./PageHeader-2abbb103.js";import{b as k,c as F,d as P,e as E,f as A}from"./element-plus-addd02c2.js";import{r as C,az as n,o as u,X as b,Y as c,e as h,aB as G,_ as l,U as g,V as S,a4 as j,f as I,am as N}from"./vendor-dfc99adc.js";import{c as B,d as H}from"./GreatOldOne-bc788c1e.js";import"./highlightjs-b0208cd2.js";const T={components:{ElForm:k,ElFormItem:F,ElInput:P,ButtonBox:x},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){const r=C(null),{computedModelValue:o}=v(e,t);return{computedModelValue:o,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(s=>{r.value.validate((m,p)=>{m&&(typeof e.onSubmit=="function"?s(e.onSubmit(o.value)):s())})})}],form:r}}};function U(e,t,r,o,y,s){const m=n("el-input"),p=n("el-form-item"),i=n("ButtonBox"),_=n("el-form");return u(),b(_,{ref:"form",model:o.computedModelValue,"label-width":"80px"},{default:c(()=>[(u(!0),h(S,null,G(r.fields,a=>(u(),h("div",{key:a.prop},[l(p,{label:a.label,prop:a.prop},{default:c(()=>[a.type==="input"?(u(),b(m,{key:0,modelValue:o.computedModelValue[a.prop],"onUpdate:modelValue":d=>o.computedModelValue[a.prop]=d},null,8,["modelValue","onUpdate:modelValue"])):g("",!0)]),_:2},1032,["label","prop"])]))),128)),o.handlers.length>0?(u(),b(i,{key:0,handlers:o.handlers},null,8,["handlers"])):g("",!0)]),_:1},8,["model"])}const R=V(T,[["render",U]]);const z={components:{AsyncButtom:M,PageHeader:w,GOOMabinogionFields:R,ElTable:E,ElTableColumn:A},setup(){const e=j([]),t=()=>H().then(r=>{e.splice(0,e.length),e.push(...r)});return t(),{realtodos:e,load:t}},methods:{onSubmit(e,t){return B(e.row.uuid,{type:"resolve",data:t}).then(()=>(O.success("处理成功"),this.load()))},reject(e,t){return B(e.row.uuid,{type:"reject",reason:t.inputValue}).then(()=>this.load())}}},L={class:"page"},X={class:"preview"};function Y(e,t,r,o,y,s){const m=n("PageHeader"),p=n("GOOMabinogionFields"),i=n("el-table-column"),_=n("AsyncButtom"),a=n("el-table");return u(),h("div",L,[l(m),l(a,{border:"",data:o.realtodos,style:{width:"100%"}},{default:c(()=>[l(i,{type:"expand"},{default:c(d=>[I("div",X,[l(p,{fields:d.row.fields,"on-submit":f=>s.onSubmit(d,f)},null,8,["fields","on-submit"])])]),_:1}),l(i,{prop:"name",label:"描述"}),l(i,{label:"操作",width:"120px"},{default:c(d=>[l(_,{type:"danger","on-click":f=>s.reject(d,f),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:c(()=>[N(" 拒绝 ")]),_:2},1032,["on-click"])]),_:1})]),_:1},8,["data"])])}const W=V(z,[["render",Y],["__scopeId","data-v-49eac67a"]]);export{W as default};
