import{_ as b,L as A,t as C,j as D}from"./index-f7418f35.js";import{aY as g,b0 as _,aW as c,ch as T,ci as h,aP as m,aQ as L,bn as w,br as E,bw as B,bp as y,bg as F,bs as N,cp as P,cq as V,aR as j}from"./vendor-b440bceb.js";const q="https://kooritea.moe/assets/404.png";const z={components:{LoadingIcon:A},directives:{imgFadeEnter:C},props:{loading:{type:Boolean,default:()=>!0},src:{type:[String,Array],default:()=>""},alt:{type:String,default:()=>""},prefix:{type:[String,Array],default:()=>""},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0}},setup(r,{emit:o,attrs:a}){const{computedLoading:e,computedSrc:n,computedLoadingDelay:d}=D(r,o),i=g(0),s=g(!0),l=g(null),v=()=>{s.value=!0,l.value&&clearTimeout(l.value),l.value=setTimeout(()=>{s.value=!1},d.value)};v(),_(n,()=>{i.value=0,e.value=!0,v()});const f=c(()=>Array.isArray(n.value)?Array.isArray(r.prefix)?n.value:n.value.map(t=>r.prefix+t):Array.isArray(r.prefix)?r.prefix.map(t=>t+n.value):[r.prefix+n.value]),p=c(()=>f.value[i.value]),u=c(()=>i.value>=f.value.length),S=c(()=>u.value?"/assets/404.png":p.value);_(u,t=>{t&&(e.value=!1,typeof a.onError=="function"&&a.onError())});const k=t=>{e.value=!1,typeof a.onLoad=="function"&&a.onLoad(t)},I=t=>{i.value++},x=c(()=>e.value||s.value);return{computedLoadingDelay:d,delayLoading:x,imageSrc:p,isError:u,onLoad:k,onError:I,applySrc:S}}},M=r=>(P("data-v-ec439ce1"),r=r(),V(),r),Q=["src","alt","title"],R=M(()=>j("img",{class:"img",src:q},null,-1));function W(r,o,a,e,n,d){const i=T("LoadingIcon"),s=h("imgFadeEnter");return m(),L("div",{class:E(["image",{["loading-type-"+a.loadingType]:!0,error:e.isError,loading:e.delayLoading}])},[e.isError?y("",!0):w((m(),L("img",{key:0,class:E(["img",{loading:e.delayLoading}]),src:e.imageSrc,alt:a.alt,title:a.alt,onLoad:o[0]||(o[0]=(...l)=>e.onLoad&&e.onLoad(...l)),onError:o[1]||(o[1]=(...l)=>e.onError&&e.onError(...l)),onDragstart:o[2]||(o[2]=B(()=>{},["prevent"]))},null,42,Q)),[[s,a.loadingType==="fade",e.computedLoadingDelay]]),e.isError?F(r.$slots,"error",{key:1},()=>[R],!0):y("",!0),e.delayLoading&&a.loadingType==="icon"?(m(),N(i,{key:2})):y("",!0)],2)}const H=b(z,[["render",W],["__scopeId","data-v-ec439ce1"]]);export{H as I};
