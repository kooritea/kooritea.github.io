import{_ as p,L as x,A as I,u as L,d as C,g as B}from"./index-7b9a30c5.js";import{I as H}from"./ImageCon-4c38e14b.js";import{b8 as l,bI as y,bK as A,b0 as E,cg as f,aR as t,aS as c,bw as k,bA as a,aT as g,a_ as N,bC as _,bs as P,bt as S,bx as T,bB as V}from"./vendor-a6581121.js";import"./element-plus-5d967f66.js";import"./highlightjs-4914df6f.js";const w={components:{ImageCon:H,LoadingIcon:x,AsyncButtom:I},setup(){const{mobileMode:b}=L(),i=l(!0),d=l(!0),o=l(!0),m=y({}),h=l(0),s=l(0),e=y([]),r=()=>(d.value=!0,C(B(e).then(n=>{e.includes(n.id)?e.splice(0,e.length):e.push(n.id),Object.assign(m,n)}),500).then(()=>{d.value=!1,o.value=!1}));r(),A(()=>{var n,v;h.value=(n=s.value)!=null&&n.clientHeight?`${(v=s.value)==null?void 0:v.clientHeight}px`:"unset"});const u=E(()=>i.value||d.value);return{mobileMode:b,imageLoading:i,firstLoading:o,hitokoto:m,loading:u,ElInfo:s,infoHeight:h,reload:r}}},z={class:"home"},M={ref:"ElInfo",class:"info"},U={key:0,class:"cn-text"},j={key:1,class:"text"},D={key:2,class:"author-title"},F={class:"author"},K={class:"title"};function O(b,i,d,o,m,h){const s=f("ImageCon"),e=f("LoadingIcon"),r=f("AsyncButtom");return t(),c("div",z,[o.hitokoto.id?(t(),k(s,{key:0,loading:o.imageLoading,"onUpdate:loading":i[0]||(i[0]=u=>o.imageLoading=u),src:`/kooritea/kooritea.github.io/img${o.mobileMode&&o.hitokoto.mobile?o.hitokoto.mobile:o.hitokoto.pc}`,"loading-type":"fade","loading-delay":200},null,8,["loading","src"])):a("",!0),g("div",{class:P(["info-box",{loading:o.loading}]),style:S({height:o.infoHeight})},[g("div",M,[o.loading?a("",!0):(t(),c(N,{key:0},[o.loading?a("",!0):(t(),c("div",U,_(o.hitokoto.cnText),1)),o.loading?a("",!0):(t(),c("div",j,_(o.hitokoto.text),1)),o.loading?a("",!0):(t(),c("div",D,[g("span",F,_(o.hitokoto.author),1),g("span",K,_(o.hitokoto.title),1)]))],64)),o.loading?(t(),k(e,{key:1})):a("",!0)],512)],6),o.firstLoading?a("",!0):(t(),k(r,{key:1,class:"reload-button",type:"info",onLoadingClick:o.reload},{default:T(()=>[V(" 换一张 ")]),_:1},8,["onLoadingClick"]))])}const W=p(w,[["render",O],["__scopeId","data-v-b70d01ab"]]);export{W as default};
