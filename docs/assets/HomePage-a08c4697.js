import{_ as x,L as b,A as I,u as L,r as l,a as p,o as B,c as C,b as k,d as t,e as c,f,g as n,h as g,F as H,t as h,n as A,i as j,w,j as E,k as N,l as P}from"./index-8a906519.js";import{I as V}from"./ImageCon-c10fd61c.js";const z={components:{ImageCon:V,LoadingIcon:b,AsyncButtom:I},setup(){const{mobileMode:v}=L(),a=l(!0),d=l(!0),o=l(!0),_=p({}),m=l(0),s=l(0),e=p([]),r=()=>(d.value=!0,E(N(e).then(i=>{e.includes(i.id)?e.splice(0,e.length):e.push(i.id),Object.assign(_,i)}),500).then(()=>{d.value=!1,o.value=!1}));r(),B(()=>{var i,y;m.value=(i=s.value)!=null&&i.clientHeight?`${(y=s.value)==null?void 0:y.clientHeight}px`:"unset"});const u=C(()=>a.value||d.value);return{mobileMode:v,imageLoading:a,firstLoading:o,hitokoto:_,loading:u,ElInfo:s,infoHeight:m,reload:r}}},F={class:"home"},M={ref:"ElInfo",class:"info"},S={key:0,class:"cn-text"},T={key:1,class:"text"},U={key:2,class:"author-title"},D={class:"author"},O={class:"title"};function q(v,a,d,o,_,m){const s=k("ImageCon"),e=k("LoadingIcon"),r=k("AsyncButtom");return t(),c("div",F,[o.hitokoto.id?(t(),f(s,{key:0,loading:o.imageLoading,"onUpdate:loading":a[0]||(a[0]=u=>o.imageLoading=u),src:o.mobileMode&&o.hitokoto.mobile?o.hitokoto.mobile:o.hitokoto.pc,"loading-type":"fade","loading-delay":200,prefix:["https://cdn.jsdelivr.net/gh/kooritea/kooritea.github.io/img","https://fastly.jsdelivr.net/gh/kooritea/kooritea.github.io/img","https://raw.githubusercontent.com/kooritea/kooritea.github.io/img"]},null,8,["loading","src","prefix"])):n("",!0),g("div",{class:A(["info-box",{loading:o.loading}]),style:j({height:o.infoHeight})},[g("div",M,[o.loading?n("",!0):(t(),c(H,{key:0},[o.loading?n("",!0):(t(),c("div",S,h(o.hitokoto.cnText),1)),o.loading?n("",!0):(t(),c("div",T,h(o.hitokoto.text),1)),o.loading?n("",!0):(t(),c("div",U,[g("span",D,h(o.hitokoto.author),1),g("span",O,"《"+h(o.hitokoto.title)+"》",1)]))],64)),o.loading?(t(),f(e,{key:1})):n("",!0)],512)],6),o.firstLoading?n("",!0):(t(),f(r,{key:1,class:"reload-button",type:"info","on-click":o.reload},{default:w(()=>[P(" 换一张 ")]),_:1},8,["on-click"]))])}const K=x(z,[["render",q],["__scopeId","data-v-37b08749"]]);export{K as default};
