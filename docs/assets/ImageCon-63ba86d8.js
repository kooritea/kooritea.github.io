import{_ as x,L as A,aa as T,n as C}from"./index-c031f2a1.js";import{b8 as g,b2 as _,b0 as d,cg as D,cB as h,aR as m,aS as L,by as B,bs as E,bR as w,bA as y,bp as F,bw as N,cY as R,cZ as V,aT as z}from"./vendor-a6581121.js";const M="https://kooritea.moe/assets/404.png";const P={components:{LoadingIcon:A},directives:{imgFadeEnter:T},props:{loading:{type:Boolean,default:()=>!0},src:{type:[String,Array],default:()=>""},alt:{type:String,default:()=>""},prefix:{type:[String,Array],default:()=>""},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0}},setup(r,{emit:o,attrs:a}){const{computedLoading:e,computedSrc:n,computedLoadingDelay:u}=C(r,o),l=g(0),s=g(!0),i=g(null),f=()=>{s.value=!0,i.value&&clearTimeout(i.value),i.value=setTimeout(()=>{s.value=!1},u.value)};f(),_(n,()=>{l.value=0,e.value=!0,f()});const v=d(()=>r.src.startsWith("http")?[r.src]:Array.isArray(n.value)?Array.isArray(r.prefix)?n.value:n.value.map(t=>r.prefix+t):Array.isArray(r.prefix)?r.prefix.map(t=>t+n.value):[r.prefix+n.value]),p=d(()=>v.value[l.value]),c=d(()=>l.value>=v.value.length),b=d(()=>c.value?"/assets/404.png":p.value);_(c,t=>{t&&(e.value=!1,typeof a.onError=="function"&&a.onError())});const S=t=>{e.value=!1,typeof a.onLoad=="function"&&a.onLoad(t)},k=t=>{l.value++},I=d(()=>e.value||s.value);return{computedLoadingDelay:u,delayLoading:I,imageSrc:p,isError:c,onLoad:S,onError:k,applySrc:b}}},W=r=>(R("data-v-7d408b01"),r=r(),V(),r),Y=["src","alt","title"],Z=W(()=>z("img",{class:"img",src:M},null,-1));function j(r,o,a,e,n,u){const l=D("LoadingIcon"),s=h("imgFadeEnter");return m(),L("div",{class:E(["image",{["loading-type-"+a.loadingType]:!0,error:e.isError,loading:e.delayLoading}])},[e.isError?y("",!0):B((m(),L("img",{key:0,class:E(["img",{loading:e.delayLoading}]),src:e.imageSrc,alt:a.alt,title:a.alt,onLoad:o[0]||(o[0]=(...i)=>e.onLoad&&e.onLoad(...i)),onError:o[1]||(o[1]=(...i)=>e.onError&&e.onError(...i)),onDragstart:o[2]||(o[2]=w(()=>{},["prevent"]))},null,42,Y)),[[s,a.loadingType==="fade",e.computedLoadingDelay]]),e.isError?F(r.$slots,"error",{key:1},()=>[Z],!0):y("",!0),e.delayLoading&&a.loadingType==="icon"?(m(),N(l,{key:2})):y("",!0)],2)}const H=x(P,[["render",j],["__scopeId","data-v-7d408b01"]]);export{H as I};
