import{_ as x,B as M,n as B,A as C,C as V,M as O,D as E}from"./index-6dfeff5e.js";import{P as F}from"./PageHeader-e97f8a21.js";import{M as P}from"./MarkDown-0f09752a.js";import{c as S,d as L,e as R,f as A,g as G,h as j,i as q}from"./element-plus-88343e01.js";import{b7 as H,cf as l,aQ as d,bv as b,bw as r,aR as y,bZ as I,bC as a,bz as h,bA as g,aZ as N,bH as v,aS as U}from"./vendor-23d2f8cc.js";import"./highlightjs-4914df6f.js";import"./ImageCon-7fd1f245.js";const T={components:{ElForm:S,ElFormItem:L,ElInput:R,ElRadioGroup:A,ElRadio:G,ButtonBox:M},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(n,{emit:t}){const s=H(null),{computedModelValue:o}=B(n,t);return{computedModelValue:o,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(u=>{s.value.validate((m,p)=>{m&&(typeof n.onSubmit=="function"?u(n.onSubmit(o.value)):u())})})}],form:s}}};function z(n,t,s,o,c,u){const m=l("el-input"),p=l("el-radio"),_=l("el-radio-group"),w=l("el-form-item"),f=l("ButtonBox"),k=l("el-form");return d(),b(k,{ref:"form",model:o.computedModelValue,"label-position":"top"},{default:r(()=>[(d(!0),y(N,null,I(s.fields,e=>(d(),y("div",{key:e.prop},[a(w,{label:e.label,prop:e.prop,required:e.required},{default:r(()=>[e.type==="input"?(d(),b(m,{key:0,modelValue:o.computedModelValue[e.prop],"onUpdate:modelValue":i=>o.computedModelValue[e.prop]=i},null,8,["modelValue","onUpdate:modelValue"])):h("",!0),e.type==="boolean"?(d(),b(_,{key:1,modelValue:o.computedModelValue[e.prop],"onUpdate:modelValue":i=>o.computedModelValue[e.prop]=i},{default:r(()=>[a(p,{border:"",value:!0},{default:r(()=>[g(" 是 ")]),_:1}),a(p,{border:"",value:!1},{default:r(()=>[g(" 否 ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):h("",!0)]),_:2},1032,["label","prop","required"])]))),128)),o.handlers.length>0?(d(),b(f,{key:0,handlers:o.handlers},null,8,["handlers"])):h("",!0)]),_:1},8,["model"])}const K=x(T,[["render",z]]);const Z={components:{AsyncButtom:C,PageHeader:F,Markdown:P,GOOMabinogionFields:K,ElTable:j,ElTableColumn:q},setup(){const n=v([]),t=v([]),s=()=>E().then(o=>{t.splice(0,t.length),t.push(...o);for(const c of t)c.fields.length<5&&n.push(c.uuid)});return s(),{expandRowKeys:n,realtodos:t,load:s}},methods:{onSubmit(n,t){return V(n.row.uuid,{type:"resolve",data:t}).then(()=>(O.success("处理成功"),this.load()))},reject(n,t){return V(n.row.uuid,{type:"reject",reason:t.inputValue}).then(()=>this.load())}}},D={class:"page"},Q={class:"preview"},J={key:0,class:"desp"},W={key:1,class:"quick-boolean"};function X(n,t,s,o,c,u){const m=l("PageHeader"),p=l("Markdown"),_=l("AsyncButtom"),w=l("GOOMabinogionFields"),f=l("el-table-column"),k=l("el-table");return d(),y("div",D,[a(m),a(k,{border:"",data:o.realtodos,style:{width:"100%"},"row-key":"uuid","expand-row-keys":o.expandRowKeys},{default:r(()=>[a(f,{type:"expand"},{default:r(e=>[U("div",Q,[e.row.desp?(d(),y("div",J,[a(p,{"model-value":e.row.desp},null,8,["model-value"])])):h("",!0),e.row.fields.length===1&&e.row.fields[0].type==="boolean"?(d(),y("div",W,[a(_,{type:"primary",onLoadingClick:()=>u.onSubmit(e,{[e.row.fields[0].prop]:!0})},{default:r(()=>[g(" 是 ")]),_:2},1032,["onLoadingClick"]),a(_,{type:"default",onLoadingClick:()=>u.onSubmit(e,{[e.row.fields[0].prop]:!1})},{default:r(()=>[g(" 否 ")]),_:2},1032,["onLoadingClick"])])):(d(),b(w,{key:2,fields:e.row.fields,"on-submit":i=>u.onSubmit(e,i)},null,8,["fields","on-submit"]))])]),_:1}),a(f,{prop:"name",label:"描述"}),a(f,{label:"操作",width:"120px"},{default:r(e=>[a(_,{type:"danger",size:"mini",onLoadingClick:i=>u.reject(e,i),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:r(()=>[g(" 拒绝 ")]),_:2},1032,["onLoadingClick"])]),_:1})]),_:1},8,["data","expand-row-keys"])])}const le=x(Z,[["render",X],["__scopeId","data-v-f626d6b9"]]);export{le as default};
