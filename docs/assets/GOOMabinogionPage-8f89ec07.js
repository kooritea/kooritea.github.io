import{_ as B,B as v,j as M,A as O,M as P}from"./index-4928ace5.js";import{P as E}from"./PageHeader-f57f8ce1.js";import{b as F,c as R,d as S,e as G,f as j,g as q,h as A}from"./element-plus-659ac695.js";import{aY as C,ch as r,aP as s,bs as f,bt as d,aQ as y,bT as U,bv as l,bp as k,bU as b,bq as I,bB as w,aR as N}from"./vendor-3ff22302.js";import{f as x,h as T}from"./GreatOldOne-d0ad2bf1.js";import"./highlightjs-4914df6f.js";const H={components:{ElForm:F,ElFormItem:R,ElInput:S,ElRadioGroup:G,ElRadio:j,ButtonBox:v},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(a,{emit:t}){const u=C(null),{computedModelValue:e}=M(a,t);return{computedModelValue:e,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(c=>{u.value.validate((p,i)=>{p&&(typeof a.onSubmit=="function"?c(a.onSubmit(e.value)):c())})})}],form:u}}};function K(a,t,u,e,m,c){const p=r("el-input"),i=r("el-radio"),h=r("el-radio-group"),_=r("el-form-item"),g=r("ButtonBox"),n=r("el-form");return s(),f(n,{ref:"form",model:e.computedModelValue,"label-position":"top"},{default:d(()=>[(s(!0),y(I,null,U(u.fields,o=>(s(),y("div",{key:o.prop},[l(_,{label:o.label,prop:o.prop,required:o.required},{default:d(()=>[o.type==="input"?(s(),f(p,{key:0,modelValue:e.computedModelValue[o.prop],"onUpdate:modelValue":V=>e.computedModelValue[o.prop]=V},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),o.type==="boolean"?(s(),f(h,{key:1,modelValue:e.computedModelValue[o.prop],"onUpdate:modelValue":V=>e.computedModelValue[o.prop]=V},{default:d(()=>[l(i,{border:"",label:!0},{default:d(()=>[b(" 是 ")]),_:1}),l(i,{border:"",label:!1},{default:d(()=>[b(" 否 ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},1032,["label","prop","required"])]))),128)),e.handlers.length>0?(s(),f(g,{key:0,handlers:e.handlers},null,8,["handlers"])):k("",!0)]),_:1},8,["model"])}const z=B(H,[["render",K]]);const L={components:{AsyncButtom:O,PageHeader:E,GOOMabinogionFields:z,ElTable:q,ElTableColumn:A},setup(){const a=w([]),t=w([]),u=()=>T().then(e=>{t.splice(0,t.length),t.push(...e);for(const m of t)m.fields.length<5&&a.push(m.uuid)});return u(),{expandRowKeys:a,realtodos:t,load:u}},methods:{onSubmit(a,t){return x(a.row.uuid,{type:"resolve",data:t}).then(()=>(P.success("处理成功"),this.load()))},reject(a,t){return x(a.row.uuid,{type:"reject",reason:t.inputValue}).then(()=>this.load())}}},Q={class:"page"},Y={class:"preview"},D={key:0,class:"quick-boolean"};function J(a,t,u,e,m,c){const p=r("PageHeader"),i=r("AsyncButtom"),h=r("GOOMabinogionFields"),_=r("el-table-column"),g=r("el-table");return s(),y("div",Q,[l(p),l(g,{border:"",data:e.realtodos,style:{width:"100%"},"row-key":"uuid","expand-row-keys":e.expandRowKeys},{default:d(()=>[l(_,{type:"expand"},{default:d(n=>[N("div",Y,[n.row.fields.length===1&&n.row.fields[0].type==="boolean"?(s(),y("div",D,[l(i,{type:"primary","on-click":()=>c.onSubmit(n,{[n.row.fields[0].prop]:!0})},{default:d(()=>[b(" 是 ")]),_:2},1032,["on-click"]),l(i,{type:"default","on-click":()=>c.onSubmit(n,{[n.row.fields[0].prop]:!1})},{default:d(()=>[b(" 否 ")]),_:2},1032,["on-click"])])):(s(),f(h,{key:1,fields:n.row.fields,"on-submit":o=>c.onSubmit(n,o)},null,8,["fields","on-submit"]))])]),_:1}),l(_,{prop:"name",label:"描述"}),l(_,{label:"操作",width:"120px"},{default:d(n=>[l(i,{type:"danger",size:"mini","on-click":o=>c.reject(n,o),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:d(()=>[b(" 拒绝 ")]),_:2},1032,["on-click"])]),_:1})]),_:1},8,["data","expand-row-keys"])])}const te=B(L,[["render",J],["__scopeId","data-v-0bbb98f7"]]);export{te as default};
