import{_ as B,B as v,j as M,A as O,M as E}from"./index-10d02635.js";import{P as F,d as w,e as P}from"./GreatOldOne-da700b3b.js";import{b as S,c as G,d as R,e as j,f as q,g as A,h as C}from"./element-plus-b6d4126d.js";import{a_ as N,cd as r,aL as u,br as f,bq as d,aM as y,bW as I,bk as l,bw as k,bu as b,bl as U,bf as x,aN as H}from"./vendor-341a5c0b.js";import"./highlightjs-b0208cd2.js";const T={components:{ElForm:S,ElFormItem:G,ElInput:R,ElRadioGroup:j,ElRadio:q,ButtonBox:v},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(a,{emit:t}){const s=N(null),{computedModelValue:e}=M(a,t);return{computedModelValue:e,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(c=>{s.value.validate((p,i)=>{p&&(typeof a.onSubmit=="function"?c(a.onSubmit(e.value)):c())})})}],form:s}}};function K(a,t,s,e,m,c){const p=r("el-input"),i=r("el-radio"),h=r("el-radio-group"),_=r("el-form-item"),g=r("ButtonBox"),n=r("el-form");return u(),f(n,{ref:"form",model:e.computedModelValue,"label-position":"top"},{default:d(()=>[(u(!0),y(U,null,I(s.fields,o=>(u(),y("div",{key:o.prop},[l(_,{label:o.label,prop:o.prop,required:o.required},{default:d(()=>[o.type==="input"?(u(),f(p,{key:0,modelValue:e.computedModelValue[o.prop],"onUpdate:modelValue":V=>e.computedModelValue[o.prop]=V},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),o.type==="boolean"?(u(),f(h,{key:1,modelValue:e.computedModelValue[o.prop],"onUpdate:modelValue":V=>e.computedModelValue[o.prop]=V},{default:d(()=>[l(i,{border:"",label:!0},{default:d(()=>[b("是")]),_:1}),l(i,{border:"",label:!1},{default:d(()=>[b("否")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},1032,["label","prop","required"])]))),128)),e.handlers.length>0?(u(),f(g,{key:0,handlers:e.handlers},null,8,["handlers"])):k("",!0)]),_:1},8,["model"])}const L=B(T,[["render",K]]);const z={components:{AsyncButtom:O,PageHeader:F,GOOMabinogionFields:L,ElTable:A,ElTableColumn:C},setup(){const a=x([]),t=x([]),s=()=>P().then(e=>{t.splice(0,t.length),t.push(...e);for(const m of t)m.fields.length<5&&a.push(m.uuid)});return s(),{expandRowKeys:a,realtodos:t,load:s}},methods:{onSubmit(a,t){return w(a.row.uuid,{type:"resolve",data:t}).then(()=>(E.success("处理成功"),this.load()))},reject(a,t){return w(a.row.uuid,{type:"reject",reason:t.inputValue}).then(()=>this.load())}}},W={class:"page"},D={class:"preview"},J={key:0,class:"quick-boolean"};function Q(a,t,s,e,m,c){const p=r("PageHeader"),i=r("AsyncButtom"),h=r("GOOMabinogionFields"),_=r("el-table-column"),g=r("el-table");return u(),y("div",W,[l(p),l(g,{border:"",data:e.realtodos,style:{width:"100%"},"row-key":"uuid","expand-row-keys":e.expandRowKeys},{default:d(()=>[l(_,{type:"expand"},{default:d(n=>[H("div",D,[n.row.fields.length===1&&n.row.fields[0].type==="boolean"?(u(),y("div",J,[l(i,{type:"primary","on-click":()=>c.onSubmit(n,{[n.row.fields[0].prop]:!0})},{default:d(()=>[b(" 是 ")]),_:2},1032,["on-click"]),l(i,{type:"default","on-click":()=>c.onSubmit(n,{[n.row.fields[0].prop]:!1})},{default:d(()=>[b(" 否 ")]),_:2},1032,["on-click"])])):(u(),f(h,{key:1,fields:n.row.fields,"on-submit":o=>c.onSubmit(n,o)},null,8,["fields","on-submit"]))])]),_:1}),l(_,{prop:"name",label:"描述"}),l(_,{label:"操作",width:"120px"},{default:d(n=>[l(i,{type:"danger",size:"mini","on-click":o=>c.reject(n,o),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:d(()=>[b(" 拒绝 ")]),_:2},1032,["on-click"])]),_:1})]),_:1},8,["data","expand-row-keys"])])}const oe=B(z,[["render",Q],["__scopeId","data-v-ce37a7c0"]]);export{oe as default};
