import{P as v}from"./PageHeader-45dfc559.js";import{_ as g,T as y,A as b,u as f,a as V,t as B,M as P}from"./index-d7a806f1.js";import{c$ as C,d9 as w,b8 as i,cg as c,aR as T,aS as h,bD as n,aT as x,bx as k,da as A,bB as I}from"./vendor-a6581121.js";import"./element-plus-a0aead36.js";import"./highlightjs-4914df6f.js";const E={components:{PageHeader:v,TextInput:y,AsyncButtom:b},setup(){const{temporaryPublicKey:u}=f(),{usernameCache:e,accessKey:l,accessExp:o,isExpiredGreatOldOne:d}=V(),p=C(),r=w(),a=i(e.value),s=i("");return{username:a,password:s,access:()=>{const m=new A;return m.setPublicKey(u.value),B(a.value,m.encrypt(s.value)).then(_=>{P.success("认证成功"),l.value=_.token,o.value=_.exp,d.value=!0,e.value=a.value,r.push({path:p.query.redirect||"/great-old-one/index"})})}}}},H={class:"page"},K={class:"login-box"},L={class:"button-box"};function N(u,e,l,o,d,p){const r=c("PageHeader"),a=c("TextInput"),s=c("AsyncButtom");return T(),h("div",H,[n(r),x("div",K,[n(a,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),border:""},null,8,["modelValue"]),n(a,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),border:"",type:"password"},null,8,["modelValue"]),x("div",L,[n(s,{onLoadingClick:o.access},{default:k(()=>[I(" 契约 ")]),_:1},8,["onLoadingClick"])])])])}const q=g(E,[["render",N],["__scopeId","data-v-5a761a23"]]);export{q as default};
