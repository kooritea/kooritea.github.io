import{P as x}from"./PageHeader-f57f8ce1.js";import{_ as f,T as y,A as g,u as b,a as P,M as V}from"./index-4928ace5.js";import{l as B}from"./GreatOldOne-d0ad2bf1.js";import{cs as h,cB as w,aY as i,ch as r,aP as C,aQ as k,bv as n,aR as v,bt as A,cC as I,bU as T}from"./vendor-3ff22302.js";import"./element-plus-659ac695.js";import"./highlightjs-4914df6f.js";const E={components:{PageHeader:x,TextInput:y,AsyncButtom:g},setup(){const{temporaryPublicKey:u}=b(),{usernameCache:e,accessKey:l,accessExp:o,isExpiredGreatOldOne:d}=P(),p=h(),c=w(),s=i(e.value),t=i("");return{username:s,password:t,access:()=>{const m=new I;return m.setPublicKey(u.value),B(s.value,m.encrypt(t.value)).then(_=>{V.success("认证成功"),l.value=_.token,o.value=_.exp,d.value=!0,e.value=s.value,c.push({path:p.query.redirect||"/great-old-one/index"})})}}}},H={class:"page"},K={class:"login-box"},N={class:"button-box"};function R(u,e,l,o,d,p){const c=r("PageHeader"),s=r("TextInput"),t=r("AsyncButtom");return C(),k("div",H,[n(c),v("div",K,[n(s,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.username=a),border:""},null,8,["modelValue"]),n(s,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),border:"",type:"password"},null,8,["modelValue"]),v("div",N,[n(t,{"on-click":o.access},{default:A(()=>[T(" 契约 ")]),_:1},8,["on-click"])])])])}const J=f(E,[["render",R],["__scopeId","data-v-69277a9f"]]);export{J as default};
