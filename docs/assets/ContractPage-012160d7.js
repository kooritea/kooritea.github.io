import{P as x}from"./PageHeader-e97f8a21.js";import{_ as g,T as y,A as f,u as b,a as V,v as C,M as P}from"./index-6dfeff5e.js";import{c_ as w,d8 as B,b7 as i,cf as c,aQ as A,aR as h,bC as n,aS as v,bw as k,d9 as I,bA as T}from"./vendor-23d2f8cc.js";import"./element-plus-88343e01.js";import"./highlightjs-4914df6f.js";const E={components:{PageHeader:x,TextInput:y,AsyncButtom:f},setup(){const{temporaryPublicKey:u}=b(),{usernameCache:e,accessKey:l,accessExp:o,isExpiredGreatOldOne:d}=V(),p=w(),r=B(),s=i(e.value),a=i("");return{username:s,password:a,access:()=>{const _=new I;return _.setPublicKey(u.value),C(s.value,_.encrypt(a.value)).then(m=>{P.success("认证成功"),l.value=m.token,o.value=m.exp,d.value=!0,e.value=s.value,r.push({path:p.query.redirect||"/great-old-one/index"})})}}}},H={class:"page"},K={class:"login-box"},L={class:"button-box"};function N(u,e,l,o,d,p){const r=c("PageHeader"),s=c("TextInput"),a=c("AsyncButtom");return A(),h("div",H,[n(r),v("div",K,[n(s,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),border:""},null,8,["modelValue"]),n(s,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),border:"",type:"password"},null,8,["modelValue"]),v("div",L,[n(a,{onLoadingClick:o.access},{default:k(()=>[T(" 契约 ")]),_:1},8,["onLoadingClick"])])])])}const q=g(E,[["render",N],["__scopeId","data-v-5a761a23"]]);export{q as default};
