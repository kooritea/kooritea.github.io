import{aP as c,aQ as f,cp as le,cq as ce,aR as l,cr as De,aW as G,cs as Oe,bY as Fe,aY as v,a$ as j,c8 as be,ch as _,bg as We,bp as p,bs as g,br as M,bw as E,bn as N,ct as Ne,by as V,b0 as Ie,b4 as Te,ci as ke,bv as x,bt as B,bU as W,bx as O,a_ as we,bB as Ee,bq as K,bT as oe,cl as de,cu as je,cv as ue,cw as Ke,bu as ne,cx as Be,cy as Ye,cz as Xe,bo as ze}from"./vendor-3ff22302.js";import{E as qe}from"./element-plus-c96ac38f.js";import"./highlightjs-4914df6f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Je="modulepreload",Qe=function(e,t){return e.startsWith(".")?new URL(e,t).href:e},xe={},y=function(t,n,o){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=Qe(a,o),a in xe)return;xe[a]=!0;const r=a.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(!!o)for(let w=s.length-1;w>=0;w--){const L=s[w];if(L.href===a&&(!r||L.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${i}`))return;const h=document.createElement("link");if(h.rel=r?"stylesheet":Je,r||(h.as="script",h.crossOrigin=""),h.href=a,document.head.appendChild(h),r)return new Promise((w,L)=>{h.addEventListener("load",w),h.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())};const S=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},Ze={},et=e=>(le("data-v-af5a2d59"),e=e(),ce(),e),tt={class:"loading-icon"},ot=et(()=>l("div",{class:"loading"},[l("div"),l("div")],-1)),nt=[ot];function rt(e,t){return c(),f("div",tt,nt)}const Y=S(Ze,[["render",rt],["__scopeId","data-v-af5a2d59"]]),st={namespaced:!0,state:()=>({mobileMode:!1,darkMode:!1,offlineModeOnly:!1,openGreatOldOneGate:!1,temporaryPublicKey:"",routeLoading:null}),mutations:{setMode(e,t){for(const n in t)e[n]=t[n]},swtichMode(e,t){e[t]=!e[t]},setValue(e,t){for(const n in t)e[n]=t[n]}},getters:{isGreatOldOne(e,t,n){return!!n.LocalStorage.accessKey&&Date.now()<n.LocalStorage.accessExp}},actions:{}};function me(){const e=De();return{...Object.keys(e.state.AppInfo).reduce((t,n)=>(t[n]=G({get:()=>e.state.AppInfo[n],set:o=>{e.commit("AppInfo/setMode",{[n]:o})}}),t),{}),isGreatOldOne:G(()=>e.getters["AppInfo/isGreatOldOne"])}}function Ce(){const{darkMode:e}=me(),t=Oe();return{pageTitle:G(()=>t.meta[e.value?"darkTitle":"title"]??t.meta.title??"冰茶的糖果罐"),fullscreen:G(()=>!!t.meta.fullscreen)}}function re(e,t){const n={},o=Fe(e);for(const s in o){const a=v(o[s].value);j(o[s],r=>{a.value=r}),n[`computed${s.slice(0,1).toUpperCase()}${s.slice(1)}`]=G({get:()=>a.value,set:r=>{t(`update:${s}`,r),a.value=r}})}return n}const Ve=function(e,t){let n;typeof e.confirmHandlerPromise=="function"&&(n=async(s,a,r)=>{if(s==="confirm"){a.confirmButtonLoading=!0;try{await e.confirmHandlerPromise(a),r()}catch(i){a.confirmButtonLoading=!1,e.errorHanlder?e.errorHanlder(i):console.error(i)}finally{a.confirmButtonLoading=!1}}else a.confirmButtonLoading||r()});let o=e.message;return typeof e.message=="string"&&(o=be("div",null,e.message.split(`
`).map(s=>be("p",null,s)))),qe.prompt("",{beforeClose:n,showCancelButton:e.beforeClose||e.confirmHandlerPromise,confirmButtonText:"确认",cancelButtonText:"取消",closeOnClickModal:!1,closeOnPressEscape:!1,closeOnHashChange:!1,showInput:!1,...e,message:o},t).catch(s=>{if(s!=="cancel")throw s})},at={install:(e,t)=>{e.config.globalProperties.$alert=Ve}},it=Ve;const lt={components:{LoadingIcon:Y},props:{type:{type:String,default:()=>"default"},disabled:{type:Boolean,default:()=>!1},loading:{type:Boolean,default:()=>!1},onClick:{type:Function,default:void 0},confirm:{type:[Object,Boolean],default:void 0},size:{type:String,default:()=>"normal"},upload:{type:Boolean,default:()=>!1}},emits:["click","update:loading"],setup(e,{emit:t}){const n=v(!0),{computedLoading:o}=re(e,t);return{computedLoading:o,refreshUploadFlag:n}},methods:{refreshUpload(){this.refreshUploadFlag=!1,this.$nextTick(()=>{this.refreshUploadFlag=!0})},_onClick(e){var t;if(!(this.computedLoading||this.disabled))if(this.confirm!==void 0?this.confirm:this.type==="danger"){const n=o=>!!o;it({title:"提示",message:"确认执行操作?",type:"warning",confirmHandlerPromise:o=>this.do({instance:o,files:e}),inputValidator:(t=this.confirm)!=null&&t.showInput?n:void 0,inputErrorMessage:"请输入内容",...this.confirm??{}})}else this.do({files:e})},do(e){if(typeof this.onClick=="function"){const t=this.onClick(e);if(t instanceof Promise)return this.computedLoading=!0,t.finally(()=>{this.computedLoading=!1})}this.$emit("click")}}};function ct(e,t,n,o,s,a){const r=_("LoadingIcon");return c(),f("div",{class:M(["button",{loading:o.computedLoading,disabled:n.disabled,[n.type]:!0,[n.size]:!0}]),onClick:t[1]||(t[1]=E(()=>{n.upload||a._onClick()},["stop"]))},[We(e.$slots,"default",{},void 0,!0),n.upload&&o.refreshUploadFlag?(c(),f("input",{key:0,class:"uploader",type:"file",onChange:t[0]||(t[0]=i=>{a._onClick(i.target.files),a.refreshUpload()})},null,32)):p("",!0),o.computedLoading?(c(),g(r,{key:1,class:M({black:n.type==="primary"})},null,8,["class"])):p("",!0)],2)}const Pe=S(lt,[["render",ct],["__scopeId","data-v-b59923ea"]]);const dt={props:{name:{type:String,required:!0}}},ut=["xlink:href"];function mt(e,t,n,o,s,a){return c(),f("svg",{class:M(["icon",n.name]),"aria-hidden":"true"},[l("use",{"xlink:href":`#${n.name}`},null,8,ut)],2)}const fe=S(dt,[["render",mt],["__scopeId","data-v-e125b142"]]);function ft(e,t=0){let n,o,s;return(...a)=>(n&&clearTimeout(n),o||(o=new Promise(r=>{s=r})),n=setTimeout(()=>{s(e(...a)),n=null,o=null,s=null},t),o)}function on(e,t="yyyy-MM-dd HH:mm:ss"){if(!e)return"";const n=function(s){return`${s<10?"0":""}${s}`},o=new Date(e);if(isNaN(o.valueOf()))throw new Error(`${e} is Invalid Date`);return t.replace(/yyyy|MM|M|dd|d|HH|H|mm|m|ss|s|DD|NDD|UTC/g,s=>{switch(s){case"yyyy":return n(o.getFullYear());case"MM":return n(o.getMonth()+1);case"M":return String(o.getMonth()+1);case"mm":return n(o.getMinutes());case"m":return String(o.getMinutes());case"dd":return n(o.getDate());case"d":return String(o.getDate());case"HH":return n(o.getHours());case"H":return String(o.getHours());case"ss":return n(o.getSeconds());case"s":return String(o.getSeconds());case"DD":switch(o.getDay()){case 1:return"周一";case 2:return"周二";case 3:return"周三";case 4:return"周四";case 5:return"周五";case 6:return"周六";case 0:return"周日";default:return String(o.getDay())}case"NDD":switch(o.getDay()){case 1:return"月曜日";case 2:return"火曜日";case 3:return"水曜日";case 4:return"木曜日";case 5:return"金曜日";case 6:return"土曜日";case 0:return"日曜日";default:return""}case"UTC":return`UTC+${0-o.getTimezoneOffset()/60}`;default:return""}})}function nn(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}function Ae(){let e;document.documentElement.scrollTop?e=document.documentElement:e=document.body;let t=!1;const n=()=>{t=!0};window.addEventListener("wheel",n),window.addEventListener("touchstart",n);const o=()=>{setTimeout(()=>{e.scrollTop>0&&!t?(e.scrollTop=e.scrollTop-e.scrollTop/10,o()):(window.removeEventListener("wheel",n),window.removeEventListener("touchstart",n))},1)};o()}function pt(e,...t){return typeof e=="function"?e(t):e}function ht(e,t=[],...n){const o={...e};for(const s in e)t.includes(s)||(o[s]=pt(e[s]));return o}function rn(e,t=0){return Promise.all([e,new Promise(n=>{setTimeout(()=>{n()},t)})]).then(n=>n[0])}function sn(e){for(const t of Object.keys(e))delete e[t]}const gt={components:{SvgIcon:fe,LoadingIcon:Y},props:{modelValue:{type:String,default:()=>""},type:{type:String,default:()=>"input"},loading:{type:Boolean,default:()=>!1},border:{type:Boolean,default:()=>!1},disabled:{type:Boolean,default:()=>!1},onInput:{type:Function,default:null},showIcon:{type:Boolean,default:()=>!0},placeholder:{type:String,default:()=>""}},setup(e,{emit:t}){const{computedModelValue:n,computedDisabled:o,computedLoading:s}=re(e,t),a=ft(()=>{try{s.value=!0;const r=e.onInput(n.value);r instanceof Promise?r.finally(()=>{s.value=!1}):s.value=!1}catch{s.value=!1}},500);return j(n,a),{computedModelValue:n,computedDisabled:o,computedLoading:s,debounceHanlder:a}}},_t={class:"text-input"},vt=["type","disabled","placeholder"],yt={key:0,class:"icon-box"};function bt(e,t,n,o,s,a){const r=_("LoadingIcon"),i=_("SvgIcon");return c(),f("div",_t,[N(l("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.computedModelValue=d),class:M(["input",{border:n.border,"show-icon":n.showIcon}]),type:n.type,disabled:o.computedDisabled,placeholder:n.placeholder},null,10,vt),[[Ne,o.computedModelValue]]),n.showIcon?(c(),f("div",yt,[o.computedLoading?(c(),g(r,{key:0})):o.computedModelValue?(c(),g(i,{key:1,name:"icon-close",onClick:t[1]||(t[1]=()=>{o.computedModelValue="",o.debounceHanlder()})})):p("",!0)])):p("",!0)])}const kt=S(gt,[["render",bt],["__scopeId","data-v-80d2c9c7"]]);const wt={name:"AsyncSwitch",components:{LoadingIcon:Y},props:{modelValue:{type:Boolean,default:()=>!1},disabled:{type:Boolean,default:()=>!1},loading:{type:Boolean,default:()=>!1},onClick:{type:Function,default:void 0}},emits:["update:modelValue","update:loading"],setup(e,{emit:t}){const{computedLoading:n}=re(e,t);return{computedLoading:n}},methods:{_onClick(){if(!(this.computedLoading||this.disabled))if(typeof this.onClick=="function"){const e=!this.modelValue,t=this.onClick(e);t instanceof Promise?(this.computedLoading=!0,t.then(()=>{this.$emit("update:modelValue",e)}).catch(n=>{n!==!1&&console.error(n)}).finally(()=>{this.computedLoading=!1})):this.$emit("update:modelValue",!this.modelValue)}else this.$emit("update:modelValue",!this.modelValue)}}},xt={class:"bg"};function Lt(e,t,n,o,s,a){const r=_("LoadingIcon");return c(),f("div",{class:M(["switch-button",{disabled:n.disabled,loading:o.computedLoading}]),onClick:t[0]||(t[0]=E((...i)=>a._onClick&&a._onClick(...i),["stop"]))},[l("div",xt,[l("div",{class:"shadow",style:V({width:n.modelValue?"100%":"0"})},null,4)]),l("div",{class:"button",style:V({left:n.modelValue?30+"px":0})},[o.computedLoading?(c(),g(r,{key:0})):p("",!0)],4)],2)}const Mt=S(wt,[["render",Lt],["__scopeId","data-v-e0652b91"]]),St={mounted(e,t,n,o){const s=document.createElement("div");s.classList.add("mask"),t.value&&s.classList.add("show"),e.parentNode.insertBefore(s,e),e.maskDom=s,s.addEventListener("click",()=>{e.dispatchEvent(new Event("mask-click"))})},beforeUpdate(e,t,n,o){e.maskDom&&(t.value?e.maskDom.classList.add("show"):e.maskDom.classList.remove("show"))},beforeUnmount(e,t,n,o){e.maskDom&&e.maskDom.remove()}},ie={handler(e,t,n,o){if(t.value){if(e.classList.add("fade-enter"),e.fadeEnterSrc===e.src)return;e.fadeEnterSrc=e.src,t.arg?(e.delayTimer&&clearTimeout(e.delayTimer),e.delayTimer=setTimeout(()=>{e.delayTimer=null,e.complete&&e.classList.remove("important-display-none")},t.arg),e.classList.add("important-display-none")):e.complete||e.classList.add("important-display-none"),e.imgFadeEnterListener=()=>{(e.delayTimer===null||!t.arg)&&e.classList.remove("important-display-none")},e.addEventListener("load",e.imgFadeEnterListener)}else e.imgFadeEnterListener&&e.removeEventListener("load",e.imgFadeEnterListener)},beforeMount(e,t,n,o){ie.handler(e,t,n,o)},updated(e,t,n,o){ie.handler(e,t,n,o)},unmounted(e,t,n,o){e.imgFadeEnterListener&&e.removeEventListener("load",e.imgFadeEnterListener)}},an=(e,t)=>{typeof e.innerHTML=="string"?e.innerHTML=t.value:e.data.domProps={innerHTML:t.value}};function Dt(e,t){if(!e)return"";try{const n=new TextEncoder,o=n.encode(t),s=n.encode(e),a=o.length<2?2:o.length;for(let r=0;r<s.length;r++){const i=o.length>0?o[r%o.length]:0;s[r]+=r%a+i}return s.toString()}catch{return""}}function Ot(e,t){if(!e)return"";try{const n=new TextDecoder,s=new TextEncoder().encode(t),a=e.split(","),r=new Uint8Array(a),i=s.length<2?2:s.length;for(let d=0;d<r.length;d++){const h=s.length>0?s[d%s.length]:0;r[d]-=d%i+h}return n.decode(r)}catch{return""}}function ee(e){if(!e)return"";try{const t=new TextDecoder,n=e.split("x"),o=new Uint8Array(n);return t.decode(o)}catch{return""}}const pe=5,It={namespaced:!0,state:()=>Tt(),mutations:{setItem(e,t){for(const n in t)e[n]=t[n];Ge(e)}},actions:{}};function he(){return{version:pe,isExpiredGreatOldOne:!1,darkModeDecodeKey:"",devMode:!1,offlineMode:!1,accessKey:"",accessExp:0,usernameCache:"",emoteHistory:[],uuid:Re()}}function Tt(){try{const e=JSON.parse(Ot(localStorage.getItem("storage")||"","localstorage"))||{};return e.version!==pe?He(e):e}catch(e){return console.error(e),he()}}function He(e){switch(e.version){case 4:{e.uuid=Re();break}default:return he()}return e.version++,e.version<pe?He(e):(Ge(e),e)}function Ge(e){localStorage.setItem("storage",Dt(JSON.stringify(e),"localstorage"))}function $e(){const e=De();return Object.keys(he()).reduce((t,n)=>(t[n]=G({get:()=>e.state.LocalStorage[n],set:o=>{e.commit("LocalStorage/setItem",{[n]:o})}}),t),{})}function Re(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxs".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}).replace(/s/,(e,t,n)=>{const o=n.split("").reduce((s,a)=>/\d/.test(a)?s+Number(a):s,0).toString();return o.slice(o.length-1,o.length)})}const Et="https://kooritea.moe/assets/kurenai.jpg";const Bt={name:"GlobalNav",components:{SvgIcon:fe,AsyncSwitch:Mt,LoadingIcon:Y,TextInput:kt,AsyncButtom:Pe},directives:{mask:St,imgFadeEnter:ie},setup(){const{routeLoading:e,darkMode:t,mobileMode:n,offlineModeOnly:o,openGreatOldOneGate:s}=me(),{isExpiredGreatOldOne:a,offlineMode:r,devMode:i,darkModeDecodeKey:d}=$e(),{pageTitle:h,fullscreen:w}=Ce(),L=v(""),C=v(!0),u=()=>{const q=document.documentElement.scrollTop||document.body.scrollTop,ae=Math.min(10,q/10);L.value=`${we(t)?"#ddd":"#222"} 0 0 ${ae}px`,C.value=q>50&&!!we(h)};Ie(()=>{window.addEventListener("scroll",u),u()}),Te(()=>{window.removeEventListener("scroll",u)});let m=null,D=0;const F=()=>{D++,D>10&&(s.value=!0),m&&clearTimeout(m),m=setTimeout(()=>{D=0,m=null},1e3)},X=v(!1),$=Oe();j(()=>$.fullPath,()=>{X.value=!1});const se=v(!1);let z=null;return{mobileMode:n,offlineModeOnly:o,isExpiredGreatOldOne:a,offlineMode:r,devMode:i,tryOpenGreatOldOneGate:F,openGreatOldOneGate:s,navShadow:L,showPageTitle:C,pageTitle:h,openMenu:X,routeLoading:e,darkMode:t,darkModeDecodeKey:d,setDarkModeDecodeKeyDialog:se,closeSetDarkModeDecodeKeyDialog:()=>{se.value=!1,typeof z=="function"&&(z(),z=null)},onSwitchDarkMode:q=>{if(q&&!d.value)return se.value=!0,new Promise(ae=>{z=ae})},fullscreen:w,setScorllGotoTop:Ae}}},P=e=>(le("data-v-e4ca2b4a"),e=e(),ce(),e),Ct={key:0,class:"mobile-menu-title"},Vt={class:"route-box"},Pt=P(()=>l("span",{class:"text"},"随笔",-1)),At=P(()=>l("span",{class:"text"},"番剧",-1)),Ht=P(()=>l("span",{class:"text"},"老婆",-1)),Gt=P(()=>l("span",{class:"text"},"后台",-1)),$t={class:"text"},Rt={class:"switch-box"},Ut=P(()=>l("span",{class:"text"},"深色模式",-1)),Ft=P(()=>l("span",{class:"text"},"离线模式",-1)),Wt={key:0},Nt=P(()=>l("span",{class:"text"},"开发模式",-1)),jt={key:1,class:"dark-entry"},Kt={class:"image",src:Et},Yt={class:"text"},Xt=P(()=>l("span",{class:"kurenai"},"如月红",-1)),zt={class:"button-box"};function qt(e,t,n,o,s,a){const r=_("router-link"),i=_("SvgIcon"),d=_("LoadingIcon"),h=_("AsyncSwitch"),w=_("TextInput"),L=_("AsyncButtom"),C=ke("mask"),u=ke("imgFadeEnter");return c(),f("nav",{class:M({fullscreen:o.fullscreen}),style:V({boxShadow:o.navShadow,fullscreen:o.fullscreen})},[l("div",{class:"logo",style:V({top:o.showPageTitle&&!o.fullscreen?"-100%":"0%"})},[l("div",{class:"slogan",onClick:t[0]||(t[0]=(...m)=>o.tryOpenGreatOldOneGate&&o.tryOpenGreatOldOneGate(...m))},[x(r,{to:"/home"},{default:B(()=>[W(" 冰茶的糖果罐 "),l("span",null,O(o.darkMode?"Unhappy Sugar Life":"Happy Sugar Life"),1)]),_:1})]),l("div",{class:"page-title",onClick:t[1]||(t[1]=m=>o.setScorllGotoTop())},O(o.pageTitle),1)],4),o.mobileMode?(c(),f("div",{key:0,class:"menu-icon",onClick:t[2]||(t[2]=m=>o.openMenu=!0)},[x(i,{name:"icon-menu"})])):p("",!0),N((c(),f("div",{class:M(["menu",{show:o.openMenu&&o.mobileMode}]),onMaskClick:t[7]||(t[7]=m=>o.openMenu=!1)},[o.mobileMode?(c(),f("div",Ct,"异国迷宫的十字路口")):p("",!0),l("ul",Vt,[x(r,{to:"/chaos"},{default:B(()=>[l("li",null,[Pt,o.routeLoading==="/chaos"?(c(),g(d,{key:0})):p("",!0)])]),_:1}),x(r,{to:"/pastel-memories"},{default:B(()=>[l("li",null,[At,o.routeLoading==="/pastel-memories"?(c(),g(d,{key:0})):p("",!0)])]),_:1}),o.darkMode?(c(),g(r,{key:0,to:"/waifu"},{default:B(()=>[l("li",null,[Ht,o.routeLoading==="/waifu"?(c(),g(d,{key:0})):p("",!0)])]),_:1})):p("",!0),o.isExpiredGreatOldOne||o.openGreatOldOneGate?(c(),g(r,{key:1,to:"/great-old-one"},{default:B(()=>[l("li",null,[Gt,["/great-old-one/index","/contract"].includes(o.routeLoading)?(c(),g(d,{key:0})):p("",!0)])]),_:1})):p("",!0),o.darkMode?(c(),f("li",{key:2,onClick:t[3]||(t[3]=m=>o.setDarkModeDecodeKeyDialog=!0)},[l("span",$t,O(o.darkModeDecodeKey?"重置":"设置")+"深色模式媒介 ",1)])):p("",!0)]),l("ul",Rt,[l("li",null,[Ut,x(h,{modelValue:o.darkMode,"onUpdate:modelValue":t[4]||(t[4]=m=>o.darkMode=m),"on-click":o.onSwitchDarkMode},null,8,["modelValue","on-click"])]),l("li",null,[Ft,o.offlineModeOnly?(c(),g(h,{key:0,"model-value":!0,disabled:!0})):(c(),g(h,{key:1,modelValue:o.offlineMode,"onUpdate:modelValue":t[5]||(t[5]=m=>o.offlineMode=m),disabled:o.offlineModeOnly},null,8,["modelValue","disabled"]))]),o.isExpiredGreatOldOne||o.openGreatOldOneGate?(c(),f("li",Wt,[Nt,x(h,{modelValue:o.devMode,"onUpdate:modelValue":t[6]||(t[6]=m=>o.devMode=m)},null,8,["modelValue"])])):p("",!0)])],34)),[[C,o.openMenu&&o.mobileMode]]),o.setDarkModeDecodeKeyDialog?N((c(),f("div",jt,[N(l("img",Kt,null,512),[[u]]),l("div",Yt,[Xt,W("身上如同 "),x(w,{modelValue:o.darkModeDecodeKey,"onUpdate:modelValue":t[8]||(t[8]=m=>o.darkModeDecodeKey=m),"show-icon":!1},null,8,["modelValue"]),W(" 的诅咒试图理解人心? ")]),l("div",zt,[x(L,{type:o.darkModeDecodeKey?"primary":"info",onClick:o.closeSetDarkModeDecodeKeyDialog},{default:B(()=>[W(O(o.darkModeDecodeKey?"确认":"忽略"),1)]),_:1},8,["type","onClick"])])])),[[C,!0]]):p("",!0)],6)}const Jt=S(Bt,[["render",qt],["__scopeId","data-v-e4ca2b4a"]]);const Qt={components:{SvgIcon:fe},setup(){return{messageList:Ee([])}},methods:{open({msg:e,type:t,duration:n=3e3}){const o={msg:e,type:t,cancel:!1,active:!0,key:String(Date.now())};n&&setTimeout(()=>{o.cancel=!0,this.$forceUpdate(),setTimeout(()=>{this.messageList.splice(this.messageList.indexOf(o),1)},200)},n),setTimeout(()=>{o.active=!1,this.$forceUpdate()},200),this.messageList.push(o)}}},Zt={class:"msg-box"},eo={class:"msg"};function to(e,t,n,o,s,a){const r=_("SvgIcon");return c(),f("div",Zt,[l("ul",null,[(c(!0),f(K,null,oe(o.messageList,i=>(c(),f("li",{key:i.key,class:M({[i.type]:!0,cancel:i.cancel,active:i.active})},[x(r,{name:"icon-info-circle"}),l("div",eo,O(i.msg),1)],2))),128))])])}const oo=S(Qt,[["render",to],["__scopeId","data-v-72b2c5ee"]]);let J=null;const T=e=>(J||(J=de(oo).mount("#msg-box")),J.open(e),J);T.success=function(e,t){T({msg:e,type:"success",...t})};T.error=function(e,t){T({msg:e,type:"error",...t})};T.info=function(e,t){T({msg:e,type:"info",...t})};T.warning=function(e,t){T({msg:e,type:"warning",...t})};const no={install:(e,t)=>{e.config.globalProperties.$msgBox=T}},I=T,k=je({strict:!1,modules:{AppInfo:st,LocalStorage:It}}),ge=ue.create({baseURL:"https://cdn.jsdelivr.net/gh/kooritea/kooritea.github.io/database"});ge.interceptors.request.use(e=>(e.apiMode="offline",e.params={...e.params,ts:Date.now()},e),e=>(console.log(e),Promise.reject(e)));ge.interceptors.response.use(e=>e.data,e=>{I.error(e.message),console.error(e);const t=e.config.url.indexOf("?")>-1?e.config.url.slice(0,e.config.url.indexOf("?")):e.config.url;throw delete te[t],e});const te={},Le=function(e){const t=e.url.indexOf("?")>-1?e.url.slice(0,e.url.indexOf("?")):e.url;return te[t]||(te[t]=ge(e)),te[t].then(n=>JSON.parse(JSON.stringify(n)))},R=ue.create();R.interceptors.request.use(e=>{const{devMode:t,accessKey:n,uuid:o}=k.state.LocalStorage;if(e.apiMode=t?"dev":"online",e.baseURL=t?"http://127.0.0.1:7004":"https://api.kooritea.moe",e.headers||(e.headers={}),n&&(e.headers["mass-controler-fingerprint"]=n),e.headers["mass-controler-uuid"]=o,document.referrer&&(e.headers.Referrer=document.referrer),e.data&&typeof e.data=="object"&&!(e.data instanceof FormData)){const s=Object.keys(e.data).reduce((a,r)=>(e.data[r]!==void 0&&(a[r]=e.data[r]),a),{});switch(e.requestType){case"urlencode":{e.data=Object.keys(s).map(a=>`${encodeURIComponent(a)}=${encodeURIComponent(s[a])}`).join("&");break}case"formdata":{const a=new FormData;for(const r in s)if(Array.isArray(s[r]))for(const i of s[r])a.append(r,i);else typeof s[r]=="object"&&!(s[r]instanceof File)?a.append(r,JSON.stringify(s[r])):a.append(r,s[r]);e.data=a;break}}}for(const s in e.params)String(e.params[s])||delete e.params[s];return e.headers["Local-Timestamp"]=Date.now()-new Date().getTimezoneOffset()*60*1e3,e},e=>(console.log(e),Promise.reject(e)));R.interceptors.response.use(e=>{const t=e.data;if(e.config.useRawResponse)return t;const{code:n,data:o,errorMsg:s}=t;if(n===4032){const a=new Error(`需要刷新页面: ${s}`);throw a.code=4032,a}if(n!==0){const a=s||"业务出错",r=new Error(a);throw r.response=e,e.config.errMsg!==!1&&I.error(s),r}return o},e=>{throw e.config.errMsg!==!1&&I.error(e.message),console.error(e),e});const H={dev:null,online:null};function Me(e){return e&&!H.dev&&(H.dev=R({apiMode:"dev",url:"/user/knock",method:"post",errMsg:!1}).then(t=>{k.commit("AppInfo/setValue",{temporaryPublicKey:t.publicKey})}).catch(t=>{throw I.warning("无法访问在线服务器，正在使用离线模式"),t})),!e&&!H.online&&(H.online=R({apiMode:"online",url:"/user/knock",method:"post",errMsg:!1}).then(t=>{k.commit("AppInfo/setValue",{temporaryPublicKey:t.publicKey})}).catch(t=>{throw I.warning("无法访问在线服务器，正在使用离线模式"),t})),H[e?"dev":"online"]}async function A(){const{offlineMode:e,devMode:t}=k.state.LocalStorage;return e?{onlineMode:!1,request:Le}:Me(t).then(()=>({onlineMode:!0,request:n=>R(n).catch(o=>{if(o.code===4032)return H.dev=null,H.online=null,Me(t).then(()=>R(n));throw o})})).catch(n=>(k.commit("AppInfo/setMode",{offlineModeOnly:!0}),{onlineMode:!1,request:Le}))}const _e=ue.create();_e.interceptors.request.use(e=>{if(e.data&&typeof e.data=="object"&&!(e.data instanceof FormData)){const t=Object.keys(e.data).reduce((n,o)=>(e.data[o]!==void 0&&(n[o]=e.data[o]),n),{});switch(e.requestType){case"urlencode":{e.data=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&");break}case"formdata":{const n=new FormData;for(const o in t)if(Array.isArray(t[o]))for(const s of t[o])n.append(o,s);else typeof t[o]=="object"&&!(t[o]instanceof File)?n.append(o,JSON.stringify(t[o])):n.append(o,t[o]);e.data=n;break}}}for(const t in e.params)String(e.params[t])||delete e.params[t];return e},e=>(console.log(e),Promise.reject(e)));_e.interceptors.response.use(e=>e.data,e=>{throw I.error(e.message),console.error(e),e});function ln(e){return A().then(({onlineMode:t,request:n})=>t?n({method:"get",url:"/blog/hitokoto/random",params:{exclude:e.join(",")}}):n({method:"get",url:"/blog/hitokoto/data"}).then(o=>{const s=o.filter(a=>o.length===1||e.length===o.length||!e.includes(a.id));return s[Math.floor(Math.random()*s.length)]}))}function ro(){return A().then(({onlineMode:e,request:t})=>t(e?{method:"get",url:"/blog/link"}:{method:"get",url:"/blog/link/data"}))}function cn({start:e,keyword:t}={}){return A().then(({onlineMode:n,request:o})=>{if(n)return/^#\d+$/.test(t)?o({method:"get",url:`/blog/essay/${t.slice(1)}`}).then(s=>[s]):o({method:"get",url:"/blog/essay",params:{start:e,keyword:t}});if(t){if(!/^#\d+$/.test(t))throw new Error("离线模式下仅可以使用[#id]形式检索");return o({url:`/blog/essay/${t.slice(1)}`}).then(s=>(s.content=ee(s.content),[s]))}else return o({url:"/blog/essay/index"}).then(s=>{const a=s.reverse();if(e){const r=a.indexOf(Number(e));return Promise.all(a.slice(r,r+10).map(i=>o({url:`/blog/essay/${i}`}).then(d=>(d.content=ee(d.content),d))))}else return Promise.all(a.slice(0,10).map(r=>o({url:`/blog/essay/${r}`}).then(i=>(i.content=ee(i.content),i))))})})}function dn({id:e}={}){return A().then(({onlineMode:t,request:n})=>t?n({method:"get",url:`/blog/essay/${e}`}):n({method:"get",url:`/blog/essay/${e}`}).then(o=>(o.content=ee(o.content),o)))}function un(){return A().then(({onlineMode:e,request:t})=>t(e?{method:"get",url:"/blog/bangumi"}:{method:"get",url:"/blog/bangumi/data"}))}function mn(e){return A().then(({onlineMode:t,request:n})=>{const o=t?n:_e;return o({url:t?"/api/netease-cloud-music/public/song/detail":"https://netease-cloud-music-api-ashen-pi-45.vercel.app/song/detail",params:{ids:e,realIP:"116.25.146.177"}}).then(s=>{const a=t?s:s==null?void 0:s.songs;if(a.length>0)return{picUrl:a[0].al.picUrl,name:a[0].name,singer:a[0].ar.map(r=>r.name).join("/"),id:e,getPlayUrl:()=>o({url:t?"/api/netease-cloud-music/public/song/url":"https://netease-cloud-music-api-ashen-pi-45.vercel.app/song/url",params:{id:e,realIP:"116.25.146.177"}}).then(r=>{var i,d;return t?r:(d=(i=r==null?void 0:r.data)==null?void 0:i[0])==null?void 0:d.url})};throw new Error(`没有找到对应的音乐: ${e}`)})})}function so(){return A().then(({onlineMode:e,request:t})=>e?t({method:"get",url:"/system/version",useRawResponse:!0}):"Offline")}function fn(){return A().then(({onlineMode:e,request:t})=>t(e?{method:"get",url:"/blog/waifu"}:{method:"get",url:"/blog/waifu/data"}))}const ao=[{name:"人理存续保障机构 菲尼斯·迦勒底",href:"https://www.fate-go.jp",title:"非的干不过欧的"},{name:"白もち桜应援团",href:"https://twitter.com/sakura_siromoti",title:""},{name:"BiLiBiLi( ゜ -゜)つロ 乾杯~",href:"https://www.bilibili.com",title:""},{name:"地球脱出计划",href:"https://kooritea.moe/site-archives/eden/index.html",title:"死にゆく楽園へ、最後のラブストーリー。"},{name:"情低保护协会",href:"",title:"その目だれの目"},{name:"圣芙蕾雅学园",href:"https://www.benghuai.com/",title:"德丽莎世界第一可爱!"},{name:"星之海学园",href:"https://charlotte-anime.jp",title:`即使失去了重要之物，少年仍然直面命运。
即使忘记了重要之人，怪物仍然挑战命运。`},{name:"ミラシュカ王国",href:"https://music.163.com/#/album?id=82096",title:"心も、病気になる"},{name:"传颂星星之人",href:"https://key.visualarts.gr.jp/product/planetarian/hd_edition/",title:"プラネタリウムはいかがですか？決して消えることの無い、無窮のきらめき。"},{name:"美食殿堂",href:"https://game.bilibili.com/pcr/",title:"お腹ぺこぺこ"}],io="20230918-1(66fb991a)",lo="https://kooritea.moe/assets/nanami.png",co="https://kooritea.moe/assets/nanami-hurueru.png";const uo={name:"GlobalFooter",setup(){const e=v([]);ro().then(o=>{const s=o.filter(i=>i.state===1),a=o.filter(i=>i.state===2),r=[];for(;s.length>0;)r.push(s.splice(Math.random()*s.length,1)[0]);for(;a.length>0;)r.push(a.splice(Math.random()*a.length,1)[0]);e.value=r});const t=v(new Date().getFullYear()),n=v("");return so().then(o=>{n.value=o}),{setScorllGotoTop:Ae,links:e,year:t,tags:ao,BuildVersion:io,ServerVersion:n}}},ve=e=>(le("data-v-84f7e404"),e=e(),ce(),e),mo={class:"container"},fo={class:"tag-link-container"},po={class:"tag-link"},ho={class:"tags"},go=["title"],_o=["href"],vo={class:"links"},yo=ve(()=>l("div",{class:"links-title"},"友链",-1)),bo=["title"],ko=["href"],wo=ve(()=>l("img",{class:"karada",src:lo},null,-1)),xo=ve(()=>l("img",{class:"hurueru",src:co},null,-1)),Lo=[wo,xo],Mo={class:"statement"},So={class:"item",title:"如月"},Do=Ke('<div class="item" title="email" data-v-84f7e404><a target="_blank" href="mailto:admin@kooritea.moe" data-v-84f7e404> admin@kooritea.moe </a></div><div class="item" title="Front end" data-v-84f7e404><a target="_blank" href="https://github.com/vuejs/" data-v-84f7e404> Page Powered by Vue 3 </a></div><div class="item" title="Back end" data-v-84f7e404> Server Powered by Nginx &amp; Nest.js </div><div class="item" title="Static Resources" data-v-84f7e404><a target="_blank" href="https://github.com/" data-v-84f7e404> Storage Powered by Github Page </a></div><div class="item" title="CDN" data-v-84f7e404><a target="_blank" href="https://www.jsdelivr.com/" data-v-84f7e404> CDN Powered by jsDelivr </a></div><div class="item" title="萌备" data-v-84f7e404><a target="_blank" href="https://icp.gov.moe" data-v-84f7e404><img style="width:18px;height:18px;top:3px;position:relative;" src="https://icp.gov.moe/images/ico64.png" data-v-84f7e404> 萌ICP备 </a><a href="https://icp.gov.moe/?keyword=20207216" target="_blank" data-v-84f7e404> 20207216号 </a></div><div class="item" title="备案" data-v-84f7e404>互联网安备：2333333333号</div><div class="item" title="" data-v-84f7e404><a target="_blank" href="https://automattic.com/cookies/" data-v-84f7e404> 本站不使用Cookie，Cookie政策爬 </a></div>',8),Oo={key:0,class:"item",title:"Build Version"},Io={key:1,class:"item",title:"Build Version"};function To(e,t,n,o,s,a){return c(),f("footer",null,[l("div",mo,[l("div",fo,[l("div",po,[l("div",ho,[(c(!0),f(K,null,oe(o.tags,r=>(c(),f("div",{key:r.name,class:"tag",title:r.title?r.title:r.href},[l("a",{target:"_blank",href:r.href,style:V({cursor:r.href?"pointer":"default",pointerEvents:r.href?"unset":"none"})},O(r.name),13,_o)],8,go))),128))]),l("div",vo,[yo,(c(!0),f(K,null,oe(o.links,r=>(c(),f("div",{key:r.name,class:M(["link",{offline:r.state===2}]),title:`${r.state===1?"":"[已失联]"}${r.abstract?r.abstract:r.url}`},[l("a",{target:"_blank",href:r.url,style:V({cursor:r.url?"pointer":"default",pointerEvents:r.url?"unset":"none"})},O(r.name),13,ko)],10,bo))),128))])]),l("div",{class:"nanami",onClick:t[0]||(t[0]=r=>o.setScorllGotoTop())},Lo)]),l("div",Mo,[l("div",So,O(`© 2016-${o.year} kisaragi`),1),Do,o.BuildVersion?(c(),f("div",Oo," Page Build: "+O(o.BuildVersion),1)):p("",!0),o.ServerVersion?(c(),f("div",Io," Server Build: "+O(o.ServerVersion),1)):p("",!0)])])])}const Eo=S(uo,[["render",To],["__scopeId","data-v-84f7e404"]]);const Bo={name:"GlobalLayout",components:{GlobalNav:Jt,GlobalFooter:Eo},setup(){const{fullscreen:e}=Ce();return{fullscreen:e}}};function Co(e,t,n,o,s,a){const r=_("GlobalNav"),i=_("router-view"),d=_("GlobalFooter");return c(),f(K,null,[x(r),l("div",{class:M(["route-body",{fullscreen:o.fullscreen}])},[x(i,null,{default:B(({Component:h})=>[e.$route.meta.keepAlive?(c(),g(Be,{key:0},[(c(),g(ne(h)))],1024)):p("",!0),e.$route.meta.keepAlive?p("",!0):(c(),g(ne(h),{key:1}))]),_:1})],2),x(d)],64)}const Se=S(Bo,[["render",Co],["__scopeId","data-v-afeb444b"]]);function Vo(e,t){const{openGreatOldOneGate:n}=k.state.AppInfo,o=k.getters["AppInfo/isGreatOldOne"],{isExpiredGreatOldOne:s}=k.state.LocalStorage;if(!n&&!o&&!s)return{path:"/"};if(o)return{path:"/great-old-one"}}function Po(e,t){if(!k.getters["AppInfo/isGreatOldOne"])return{path:"/contract",query:{redirect:e.fullPath}}}function b(e){return e.catch(t=>{throw I.error(`动态加载组件失败, ${t}`),k.commit("AppInfo/setValue",{routeLoading:null}),t})}const Ao=[{path:"/",component:Se,redirect:"/chaos",meta:{keepAlive:!0},children:[{path:"/home",component:()=>b(y(()=>import("./HomePage-874a598b.js"),["https://kooritea.moe/assets/HomePage-874a598b.js","https://kooritea.moe/assets/ImageCon-4444eb59.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/ImageCon-7200ecbe.css","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/HomePage-dfdaf61f.css"],import.meta.url)),meta:{title:"冰茶的糖果罐",fullscreen:!0}},{path:"/chaos",component:()=>b(y(()=>import("./ChaosPage-a7414cbe.js"),["https://kooritea.moe/assets/ChaosPage-a7414cbe.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/NextButton-a4b27c63.js","https://kooritea.moe/assets/NextButton-f0a76b3b.css","https://kooritea.moe/assets/MarkDown-f6714ebf.js","https://kooritea.moe/assets/ImageCon-4444eb59.js","https://kooritea.moe/assets/ImageCon-7200ecbe.css","https://kooritea.moe/assets/MarkDown-1815bb63.css","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/ChaosPage-b94d0184.css"],import.meta.url)),meta:{title:"试图画出时间的影子",darkTitle:"稍微窥探头脑中的混沌",keepAlive:!0}},{path:"/pastel-memories",component:()=>b(y(()=>import("./BangumiPage-ebd64f80.js"),["https://kooritea.moe/assets/BangumiPage-ebd64f80.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/ImageCon-4444eb59.js","https://kooritea.moe/assets/ImageCon-7200ecbe.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/BangumiPage-36af7e3f.css"],import.meta.url)),meta:{title:"番剧列表",darkTitle:"粉色回忆",keepAlive:!0}},{path:"/waifu",component:()=>b(y(()=>import("./WaifuPage-111a6035.js"),["https://kooritea.moe/assets/WaifuPage-111a6035.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/NextButton-a4b27c63.js","https://kooritea.moe/assets/NextButton-f0a76b3b.css","https://kooritea.moe/assets/ImageCon-4444eb59.js","https://kooritea.moe/assets/ImageCon-7200ecbe.css","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/WaifuPage-0e3521e6.css"],import.meta.url)),meta:{title:"誰でも大好き",darkTitle:"神经病，难道她们不是我老婆吗",keepAlive:!0}},{path:"/contract",component:()=>b(y(()=>import("./ContractPage-b9b0579e.js"),["https://kooritea.moe/assets/ContractPage-b9b0579e.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/ContractPage-6628a832.css"],import.meta.url)),beforeEnter:[Vo],meta:{title:"Access",darkTitle:"圆环契约",keepAlive:!0}}]},{path:"/great-old-one",component:Se,redirect:"/great-old-one/index",beforeEnter:[Po],meta:{keepAlive:!0},children:[{path:"/great-old-one/index",component:()=>b(y(()=>import("./GOOIndexPage-48c58db8.js"),["https://kooritea.moe/assets/GOOIndexPage-48c58db8.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/GOOIndexPage-a72a1425.css"],import.meta.url)),meta:{title:"后台管理",darkTitle:"旧日支配者的花园"}},{path:"/great-old-one/chaos",component:()=>b(y(()=>import("./GOOChaosPage-348020e0.js"),["https://kooritea.moe/assets/GOOChaosPage-348020e0.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/MDEditor-463a0cdf.js","https://kooritea.moe/assets/MarkDown-f6714ebf.js","https://kooritea.moe/assets/ImageCon-4444eb59.js","https://kooritea.moe/assets/ImageCon-7200ecbe.css","https://kooritea.moe/assets/MarkDown-1815bb63.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/MDEditor-19e0444a.css","https://kooritea.moe/assets/GOOChaosPage-a1f5f43c.css"],import.meta.url)),meta:{title:"编写随笔",darkTitle:"创造混沌"}},{path:"/great-old-one/revelation",component:()=>b(y(()=>import("./GOORevelationPage-caf1c19c.js"),["https://kooritea.moe/assets/GOORevelationPage-caf1c19c.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/GOORevelationPage-cf59e26a.css"],import.meta.url)),meta:{title:"浏览日志",darkTitle:"启示录"}},{path:"/great-old-one/mabinogion",component:()=>b(y(()=>import("./GOOMabinogionPage-71f4caaf.js"),["https://kooritea.moe/assets/GOOMabinogionPage-71f4caaf.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/GOOMabinogionPage-0cd9d7c5.css"],import.meta.url)),meta:{title:"处理待办",darkTitle:"黑暗圣典"}},{path:"/great-old-one/deathnote",component:()=>b(y(()=>import("./GOODeathNotePage-a85b7198.js"),["https://kooritea.moe/assets/GOODeathNotePage-a85b7198.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/GOODeathNotePage-32fc0e86.css"],import.meta.url)),meta:{title:"文件管理",darkTitle:"死亡笔记"}},{path:"/great-old-one/pastel-memories",component:()=>b(y(()=>import("./GOOBangumiPage-03d65401.js"),["https://kooritea.moe/assets/GOOBangumiPage-03d65401.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/NextButton-a4b27c63.js","https://kooritea.moe/assets/NextButton-f0a76b3b.css","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/ImageCon-4444eb59.js","https://kooritea.moe/assets/ImageCon-7200ecbe.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/GOOBangumiPage-84bf1142.css"],import.meta.url)),meta:{title:"番剧管理",darkTitle:"粉色回忆"}},{path:"/great-old-one/waifu",component:()=>b(y(()=>import("./GOOWaifuPage-e8d54e31.js"),["https://kooritea.moe/assets/GOOWaifuPage-e8d54e31.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/GOOWaifuPage-0e5aea55.css"],import.meta.url)),meta:{title:"waifu管理",darkTitle:"waifu管理"}},{path:"/great-old-one/analytics",component:()=>b(y(()=>import("./GOOAnalyticsPage-afb10435.js"),["https://kooritea.moe/assets/GOOAnalyticsPage-afb10435.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/echarts-a601c929.js","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/GOOAnalyticsPage-dd541a5e.css"],import.meta.url)),meta:{title:"分析统计",darkTitle:"分析统计"}},{path:"/great-old-one/online-device",component:()=>b(y(()=>import("./GOOOnlineDevice-9fa5c96f.js"),["https://kooritea.moe/assets/GOOOnlineDevice-9fa5c96f.js","https://kooritea.moe/assets/PageHeader-10cb0878.js","https://kooritea.moe/assets/vendor-3ff22302.js","https://kooritea.moe/assets/highlightjs-4914df6f.js","https://kooritea.moe/assets/PageHeader-1837a03f.css","https://kooritea.moe/assets/GreatOldOne-9695ecf4.js","https://kooritea.moe/assets/element-plus-c96ac38f.js","https://kooritea.moe/assets/element-plus-1224c258.css","https://kooritea.moe/assets/GOOOnlineDevice-e0563c37.css"],import.meta.url)),meta:{title:"在线设备",darkTitle:"在线设备"}}]},{path:"/:pathMatch(.*)*",redirect:"/"}],ye=Ye({history:Xe(),routes:Ao});ye.beforeEach((e,t)=>{k.commit("AppInfo/setValue",{routeLoading:e.fullPath})});ye.afterEach((e,t)=>{k.state.AppInfo.routeLoading===e.fullPath&&k.commit("AppInfo/setValue",{routeLoading:null}),window.scrollTo({left:0,top:0,behavior:"smooth"})});const Ho={components:{AsyncButtom:Pe},props:{handlers:{type:Array,default:()=>[]}},setup(e,{emit:t}){const{computedHandlers:n}=re(e,t);return{computedHandlers:G(()=>n.value.map(o=>ht(o,["handler"])).filter(o=>o.show!==!1).sort((o,s)=>o.sort-s.sort))}}},Go={class:"button-box"};function $o(e,t,n,o,s,a){const r=_("AsyncButtom");return c(),f("div",Go,[(c(!0),f(K,null,oe(o.computedHandlers,i=>(c(),g(r,{key:i.name,type:i.type,"on-click":i.handler,confirm:i.confirm,disabled:i.disabled,upload:i.upload},{default:B(()=>[W(O(i.name),1)]),_:2},1032,["type","on-click","confirm","disabled","upload"]))),128))])}const Ro=S(Ho,[["render",$o],["__scopeId","data-v-25d4eddf"]]);function Q(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Uo(e=()=>{}){const t=v(0),n=v(0),o=v(null),s=v(null),a=v(""),r={start:!1,startCoordinate:{x:0,y:0},prevCoordinate:{x:0,y:0},endCoordinate:{x:0,y:0},touches:null,isScale:!1};return{offsetX:t,offsetY:n,imageWidth:o,imageHeight:s,mainBorder:a,touchstart:u=>{u.preventDefault(),r.start=!0,u.touches.length===1?(r.startCoordinate={x:u.touches[0].clientX,y:u.touches[0].clientY},r.prevCoordinate={x:u.touches[0].clientX,y:u.touches[0].clientY}):r.touches=u.touches},touchmove:u=>{if(u.preventDefault(),r.start){if(u.touches.length>1){r.isScale=!0;let m=r.touches[0],D=r.touches[1];const F=Q({x:m.clientX,y:m.clientY},{x:D.clientX,y:D.clientY});m=u.touches[0],D=u.touches[1];const X=Q({x:m.clientX,y:m.clientY},{x:D.clientX,y:D.clientY}),$=(F-X)/10;a.value==="height"?s.value-$>50&&(s.value=s.value-$):o.value-$>50&&(o.value=o.value-$)}else if(!r.isScale){const m={x:u.touches[0].clientX,y:u.touches[0].clientY};t.value+=r.prevCoordinate.x-m.x,n.value+=r.prevCoordinate.y-m.y,r.prevCoordinate=m}}},touchend:u=>{u.preventDefault(),u.touches.length===0&&(r.isScale?r.isScale=!1:(r.start=!1,r.endCoordinate={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY},Q(r.startCoordinate,r.endCoordinate)<5&&e()))},mousedown:u=>{u.preventDefault(),r.start=!0,r.startCoordinate={x:u.clientX,y:u.clientY},r.prevCoordinate={x:u.clientX,y:u.clientY}},mousemove:u=>{if(u.preventDefault(),r.start){const m={x:u.clientX,y:u.clientY};t.value+=r.prevCoordinate.x-m.x,n.value+=r.prevCoordinate.y-m.y,r.prevCoordinate=m}},mouseup:u=>{u.preventDefault(),r.start&&(r.start=!1,r.endCoordinate={x:u.clientX,y:u.clientY},Q(r.startCoordinate,r.endCoordinate)<5&&e())}}}const Fo={components:{LoadingIcon:Y,ButtonBox:Ro},setup(){const e=v(!1),t=v(!1),n=v(!1),o=v(""),s=Ee([]),a=()=>{e.value=!1,t.value=!1,d.value=null,h.value=null,r.value=0,i.value=0,w.value="",o.value=""},{offsetX:r,offsetY:i,imageWidth:d,imageHeight:h,mainBorder:w,touchstart:L,touchmove:C,touchend:u,mousedown:m,mousemove:D,mouseup:F}=Uo(a);return{visible:e,loading:t,src:o,handlers:s,offsetX:r,offsetY:i,imageWidth:d,imageHeight:h,mainBorder:w,touchstart:L,touchmove:C,touchend:u,mousedown:m,mousemove:D,mouseup:F,callClose:a,isWheel:n}},computed:{imageWidthString(){return this.imageWidth===null?"auto":this.imageWidth+"px"},imageHeightString(){return this.imageHeight===null?"auto":this.imageHeight+"px"}},methods:{open({src:e,handlers:t=[]}){this.loading=!0,this.visible=!0,this.src=e,this.handlers=t;let n=!1;const o=setInterval(()=>{!n&&this.$refs.img&&this.$refs.img.width&&this.$refs.img.height&&(n=!0,clearInterval(o),this.initImageSize())},100)},vw(e){return document.documentElement.clientWidth*(e/100)},vh(e){return document.documentElement.clientHeight*(e/100)},initImageSize(){const e=this.$refs.img,t=this.vw(100);if(this.vh(100)>t){const o=this.vh(80);e.width/e.height*o>this.vw(80)?(this.imageWidth=this.vw(80),this.mainBorder="width"):(this.imageHeight=o,this.mainBorder="height")}else{const o=this.vw(80);e.height/e.width*o>this.vh(80)?(this.imageHeight=this.vh(80),this.mainBorder="height"):(this.imageWidth=o,this.mainBorder="width")}},onLoad(e){this.loading=!1},onWheel(e){e.preventDefault(),this.isWheel=!0,this.loading||(this.mainBorder==="height"?this.imageHeight-e.deltaY>50&&(this.imageHeight=this.imageHeight-e.deltaY):this.imageWidth-e.deltaY>50&&(this.imageWidth=this.imageWidth-e.deltaY))}}},Wo=["src"];function No(e,t,n,o,s,a){const r=_("LoadingIcon"),i=_("ButtonBox");return o.visible?(c(),f("div",{key:0,class:"image-viewer",onWheel:t[7]||(t[7]=E((...d)=>a.onWheel&&a.onWheel(...d),["prevent","stop"])),onTouchstart:t[8]||(t[8]=(...d)=>o.touchstart&&o.touchstart(...d)),onTouchmove:t[9]||(t[9]=d=>{o.isWheel=!1,o.touchmove(d)}),onTouchend:t[10]||(t[10]=(...d)=>o.touchend&&o.touchend(...d)),onMousedown:t[11]||(t[11]=(...d)=>o.mousedown&&o.mousedown(...d)),onMousemove:t[12]||(t[12]=(...d)=>o.mousemove&&o.mousemove(...d)),onMouseup:t[13]||(t[13]=(...d)=>o.mouseup&&o.mouseup(...d))},[l("div",{class:M(["img-bg",{loading:o.loading}]),style:V({left:`calc(50% - ${o.offsetX}px)`,top:`calc(50% - ${o.offsetY}px)`})},[N(l("img",{ref:"img",class:M(["image",{"is-wheel":o.isWheel}]),style:V({height:a.imageHeightString,width:a.imageWidthString}),src:o.src,onLoad:t[0]||(t[0]=(...d)=>a.onLoad&&a.onLoad(...d))},null,46,Wo),[[ze,o.imageWidth||o.imageHeight]])],6),o.loading?(c(),g(r,{key:0,class:"loading"})):p("",!0),o.handlers.length>0?(c(),g(i,{key:1,handlers:o.handlers,onTouchstart:t[1]||(t[1]=E(()=>{},["stop"])),onTouchmove:t[2]||(t[2]=E(()=>{},["stop"])),onTouchend:t[3]||(t[3]=E(()=>{},["stop"])),onMousedown:t[4]||(t[4]=E(()=>{},["stop"])),onMousemove:t[5]||(t[5]=E(()=>{},["stop"])),onMouseup:t[6]||(t[6]=E(()=>{},["stop"]))},null,8,["handlers"])):p("",!0)],32)):p("",!0)}const jo=S(Fo,[["render",No],["__scopeId","data-v-69b246e0"]]);let Z=null;const Ue=(e,t={})=>(Z||(Z=de(jo).mount("#image-viewer")),Z.open({src:e,...t}),Z),Ko={install:(e,t)=>{e.config.globalProperties.$imagePreview=Ue}},pn=Ue;const Yo={setup(){const{darkMode:e,mobileMode:t}=me(),{accessKey:n,offlineMode:o,devMode:s}=$e(),a=()=>{t.value=window.innerWidth<window.innerHeight};j(e,i=>{i?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")}),j(t,i=>{i?document.body.classList.add("mobile-mode"):document.body.classList.remove("mobile-mode")}),Ie(()=>{window.addEventListener("resize",a),a();const i=new Date().getHours();i>=0&&i<6&&(e.value=!0,I.warning("现在是网抑时间"))}),Te(()=>{window.removeEventListener("resize",a)}),s.value&&I.warning("已设置使用开发模式"),o.value&&I.warning("已设置使用离线模式");const r=new Date;r.getHours()>=17&&r.getHours()<19&&I.warning("逢魔之时"),window.__toAuthAssetsUrl=function(i){return`${i}?token=${n.value}`}}},Xo={class:"app"};function zo(e,t,n,o,s,a){const r=_("router-view");return c(),f("div",Xo,[x(r,null,{default:B(({Component:i})=>[e.$route.meta.keepAlive?(c(),g(Be,{key:0},[(c(),g(ne(i)))],1024)):p("",!0),e.$route.meta.keepAlive?p("",!0):(c(),g(ne(i),{key:1}))]),_:1})])}const qo=S(Yo,[["render",zo]]),U=de(qo);U.use(ye);U.use(k);U.use(Ko);U.use(no);U.use(at);U.mount("#app");export{Pe as A,Ro as B,pn as I,Y as L,I as M,fe as S,kt as T,S as _,$e as a,dn as b,cn as c,rn as d,Ot as e,on as f,ln as g,y as h,Mt as i,re as j,un as k,fn as l,St as m,it as n,an as o,_e as p,mn as q,ie as r,Ae as s,sn as t,me as u,A as v,nn as w,Ce as x};
