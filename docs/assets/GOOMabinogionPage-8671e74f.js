import{_ as x,B as M,j as B,A as O,M as P}from"./index-8afe2753.js";import{P as E}from"./PageHeader-56066d73.js";import{M as F}from"./MarkDown-1a551a43.js";import{c as R,d as S,e as j,f as A,g as G,h as C,i as q}from"./element-plus-966ba156.js";import{b2 as I,ch as l,aP as d,bv as b,bu as r,aQ as y,b_ as N,bo as n,bA as g,by as h,bp as U,bj as V,aR as H}from"./vendor-b07f99b0.js";import{f as v,h as T}from"./GreatOldOne-395b41b1.js";import"./highlightjs-4914df6f.js";import"./ImageCon-705b8248.js";const K={components:{ElForm:R,ElFormItem:S,ElInput:j,ElRadioGroup:A,ElRadio:G,ButtonBox:M},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(a,{emit:t}){const s=I(null),{computedModelValue:o}=B(a,t);return{computedModelValue:o,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(u=>{s.value.validate((m,p)=>{m&&(typeof a.onSubmit=="function"?u(a.onSubmit(o.value)):u())})})}],form:s}}};function z(a,t,s,o,i,u){const m=l("el-input"),p=l("el-radio"),_=l("el-radio-group"),k=l("el-form-item"),f=l("ButtonBox"),w=l("el-form");return d(),b(w,{ref:"form",model:o.computedModelValue,"label-position":"top"},{default:r(()=>[(d(!0),y(U,null,N(s.fields,e=>(d(),y("div",{key:e.prop},[n(k,{label:e.label,prop:e.prop,required:e.required},{default:r(()=>[e.type==="input"?(d(),b(m,{key:0,modelValue:o.computedModelValue[e.prop],"onUpdate:modelValue":c=>o.computedModelValue[e.prop]=c},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type==="boolean"?(d(),b(_,{key:1,modelValue:o.computedModelValue[e.prop],"onUpdate:modelValue":c=>o.computedModelValue[e.prop]=c},{default:r(()=>[n(p,{border:"",label:!0},{default:r(()=>[h(" 是 ")]),_:1}),n(p,{border:"",label:!1},{default:r(()=>[h(" 否 ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):g("",!0)]),_:2},1032,["label","prop","required"])]))),128)),o.handlers.length>0?(d(),b(f,{key:0,handlers:o.handlers},null,8,["handlers"])):g("",!0)]),_:1},8,["model"])}const L=x(K,[["render",z]]);const Q={components:{AsyncButtom:O,PageHeader:E,Markdown:F,GOOMabinogionFields:L,ElTable:C,ElTableColumn:q},setup(){const a=V([]),t=V([]),s=()=>T().then(o=>{t.splice(0,t.length),t.push(...o);for(const i of t)i.fields.length<5&&a.push(i.uuid)});return s(),{expandRowKeys:a,realtodos:t,load:s}},methods:{onSubmit(a,t){return v(a.row.uuid,{type:"resolve",data:t}).then(()=>(P.success("处理成功"),this.load()))},reject(a,t){return v(a.row.uuid,{type:"reject",reason:t.inputValue}).then(()=>this.load())}}},D={class:"page"},J={class:"preview"},W={key:0,class:"desp"},X={key:1,class:"quick-boolean"};function Y(a,t,s,o,i,u){const m=l("PageHeader"),p=l("Markdown"),_=l("AsyncButtom"),k=l("GOOMabinogionFields"),f=l("el-table-column"),w=l("el-table");return d(),y("div",D,[n(m),n(w,{border:"",data:o.realtodos,style:{width:"100%"},"row-key":"uuid","expand-row-keys":o.expandRowKeys},{default:r(()=>[n(f,{type:"expand"},{default:r(e=>[H("div",J,[e.row.desp?(d(),y("div",W,[n(p,{"model-value":e.row.desp},null,8,["model-value"])])):g("",!0),e.row.fields.length===1&&e.row.fields[0].type==="boolean"?(d(),y("div",X,[n(_,{type:"primary","on-click":()=>u.onSubmit(e,{[e.row.fields[0].prop]:!0})},{default:r(()=>[h(" 是 ")]),_:2},1032,["on-click"]),n(_,{type:"default","on-click":()=>u.onSubmit(e,{[e.row.fields[0].prop]:!1})},{default:r(()=>[h(" 否 ")]),_:2},1032,["on-click"])])):(d(),b(k,{key:2,fields:e.row.fields,"on-submit":c=>u.onSubmit(e,c)},null,8,["fields","on-submit"]))])]),_:1}),n(f,{prop:"name",label:"描述"}),n(f,{label:"操作",width:"120px"},{default:r(e=>[n(_,{type:"danger",size:"mini","on-click":c=>u.reject(e,c),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:r(()=>[h(" 拒绝 ")]),_:2},1032,["on-click"])]),_:1})]),_:1},8,["data","expand-row-keys"])])}const re=x(Q,[["render",Y],["__scopeId","data-v-7ad25152"]]);export{re as default};
