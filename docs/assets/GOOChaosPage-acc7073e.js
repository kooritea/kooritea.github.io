import{_ as x,l as b,M as m}from"./index-eeeabb0f.js";import{P as g}from"./PageHeader-89f5137c.js";import y from"./MDEditor-2171b6b6.js";import{p as P}from"./GreatOldOne-72b552a2.js";import{r as n,a5 as p,aN as _,o as v,h as H,$ as V,Y as M,V as D}from"./vendor-3b101320.js";import"./element-plus-e4ab5447.js";import"./highlightjs-b0208cd2.js";import"./MarkDown-b15d2950.js";import"./ImageCon-caab26df.js";const A={components:{PageHeader:g,MDEditor:y},setup(E){const r=n(!1),l=n(null),e=n(null),s=n(""),d=n(""),c=()=>P(s.value,r.value&&d.value?d.value:void 0).then(()=>{m.success("发表成功")}),i=k=>{const u=k==="white"?l:e;return p([{name:()=>"插入媒体",type:"default",sort:1,handler:()=>{b({title:"插入媒体内容",showInput:!0,inputType:"textarea",confirmHandlerPromise:h=>{var f;const w=(f=h.inputValue.match(/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g))==null?void 0:f[0],t=new URL(w);if(t.host.includes("music")&&t.host.includes("163")){if(t.host==="music.163.com"){const a=t.href.match(/id=(\d+)/)[1];u.value.insertText(`[music ${a}]`);return}if(t.host==="y.music.163.com"){const a=t.pathname.match(/(\d+)\/?$/)[1];u.value.insertText(`[music ${a}]`);return}}if(t.host.includes("bilibili")){const a=t.href.match(/(BV|AV)([a-z0-9A-Z]+)/)[0];u.value.insertText(`[bilibili ${a}]`);return}if(t.host.includes("youtube")){const a=t.pathname.slice(t.pathname.lastIndexOf("/")+1);u.value.insertText(`[youtube ${a}]`);return}throw new Error},errorHanlder(h){m.error("没有匹配的媒体类型")}})}}])},o=p([{name:()=>r.value?"关闭深色模式":"深色模式",type:"default",sort:30,handler:()=>{r.value=!r.value}},{name:"提交",type:"primary",sort:40,handler:()=>{if(!s.value){m.warning("正文内容不能为空");return}return c().then(()=>{l.value.submitHandler(),e.value&&e.value.submitHandler()})}}]);return{addDarkMode:r,handlers:o,getPublicHandlers:i,whiteEditor:l,darkEditor:e,whiteEditorValue:s,darkEditorValue:d}}},B={class:"page"};function O(E,r,l,e,s,d){const c=_("PageHeader"),i=_("MDEditor");return v(),H("div",B,[V(c),V(i,{ref:"whiteEditor",modelValue:e.whiteEditorValue,"onUpdate:modelValue":r[0]||(r[0]=o=>e.whiteEditorValue=o),cache:"white-mode","show-default-handlers":["reset","clean"],"ex-handlers":[...e.getPublicHandlers("white"),...e.addDarkMode?[]:e.handlers]},null,8,["modelValue","ex-handlers"]),e.addDarkMode?(v(),M(i,{key:0,ref:"darkEditor",modelValue:e.darkEditorValue,"onUpdate:modelValue":r[1]||(r[1]=o=>e.darkEditorValue=o),cache:"dark-mode",title:"深色模式内容","show-default-handlers":["reset","clean"],"ex-handlers":[...e.getPublicHandlers("dark"),...e.addDarkMode?e.handlers:[]]},null,8,["modelValue","ex-handlers"])):D("",!0)])}const R=x(A,[["render",O],["__scopeId","data-v-fa933b99"]]);export{R as default};
