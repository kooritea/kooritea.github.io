{"id":2509,"content":"翻了一遍搜索引擎\nMP3计算长度的方式，如果码率固定的话可以用文件大小(KB)*8/码率(Kb/s)就是时间了\n算了半天算出来也没错，怎么博客的播放器那里就错了\n\n原来是博客播放器将秒转化为分钟表示方式的时候转错了\n\n```javascript\n// 错误\nlet m = Math.round(duration / 60) // Math.round 四舍五入\nlet s = Math.round(duration % 60)\nreturn `${m < 10 ? '0' + m : m}:${s < 10 ? '0' + s : s}`\n```\n\n\n```javascript\n// 正确\nlet m = Math.floor(duration / 60)// Math.floor 丢弃小数点右边\nlet s = Math.floor(duration % 60)\nreturn `${m < 10 ? '0' + m : m}:${s < 10 ? '0' + s : s}`\n```\n\n顺带一提\n使用文件大小计算静态码率的时候，因为ID3V2里面可能嵌了图片，视图片大小占比会有误差，这个可以读取ID3V2头的第6~9个字节，用上次的方法算出ID3V2的大小再算。\n使用audio标签貌似不管动态码率还是静态码率都能自适应地算出来","hide":"","time":"2020-08-22T08:18:23.000Z"}