{"id":2499,"content":"有听过FLV.js是将flv切片，然后一帧一帧转成MP4喂给video标签\n\n关于这个怎么个喂法\n\n可以看到页面上video标签使用的是Blob:// 这种协议的连接，这个是通过URL.createObjectURL弄出来的\nURL.createObjectURL可以接受的参数类型有 File、Blob 、 MediaSource \n而这个MediaSource就是要找的\n\n```javascript\nconst mediaSource = new MediaSource();\nvideo.src = URL.createObjectURL(mediaSource)\nconst sourceBuffer = mediaSource.addSourceBuffer('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"');\n\nfunction onload(arrayBuffer){\n  sourceBuffer.appendBuffer(arrayBuffer);\n}\n\nfunction onend(){\n  mediaSource.endOfStream();\n}\n\nvideo.play()\n\n```\n\n不过这是我猜的，我并不知道video能不能在调用endOfStream之前播放媒体","hide":"","time":"2020-08-21T12:11:32.000Z"}