{"id":912,"content":"```javascript\nconst create = function(obj = {}){\n  obj = JSON.parse(JSON.stringify(obj))\n  // 不做深拷贝必爆栈\n  for(let key in obj){\n    if(typeof obj[key] === 'object' && obj[key] !== null){\n      obj[key] = create(obj[key])\n    }\n  }\n  return new Proxy(obj,{\n    set:function(target, key, value){\n      switch(typeof value){\n        case 'object':\n          if(value === null){\n            target[key] = value\n            return true\n          }\n          if(Array.isArray(target) && key === 'length'){\n            target[key] = value\n            return true\n          }\n          target[key] = create(value)\n          break\n        case 'function':\n          break\n        default:\n          target[key] = value\n      }\n      // do something\n      return true\n    }\n  })\n}\n```\n递归创建一个可以监听内部变化的对象，这东西写来是在nodejs里面实现localstorage的\n\n递归能写出来倒好，写就很麻烦了，感觉不太符合人类的思考模式...","hide":"","time":"2019-07-09T05:57:30.000Z"}