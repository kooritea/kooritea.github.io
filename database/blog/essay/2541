{"id":2541,"content":"通过反编译看到绿色守护怎么做到让fcm唤起已被停止的应用了\nhook `com.android.server.am.ActivityManagerService`的`broadcastIntentLocked`方法\n这个方法的第3个参数就是intent\n获取这个intent添加flags就好了\nintent.addFlags(32)\n\n32就是Intent.FLAG_INCLUDE_STOPPED_PACKAGES\n\n看代码貌似不只有fcm会调用这个方法，所以要精准hook fcm绿色守护这里还判断了intent的action。\n不过这都不是事\n\n题外话，绿色守护这个让fcm唤起绿色化应用功能对com.tencent.mm(微信)做了额外操作，至于做了什么就懒得看了，而且微信现在对国内ip已经不推fcm了","hide":"","time":"2020-09-02T03:33:00.000Z"}