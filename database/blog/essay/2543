{"id":2543,"content":"比想象中要快，只写xposed注入的部分不写界面，一个50行的类就搞掂了\n\nxposed提供了XposedHelpers.findAndHookMethod和XposedBridge.hookMethod两种设置钩子的方法\n\n其中XposedHelpers.findAndHookMethod不是很灵活\n```java\n// 需要在findAndHookMethod的参数中完整地输入需要hook的方法的参数，一个都不能漏错(因为会有的方法有重载，所以参数要准确)\nXposedHelpers.findAndHookMethod(Application.class, \"attach\", Class<?> ...args[], new XC_MethodHook() {\n    @Override\n    protected void beforeHookedMethod(MethodHookParam param) throws Throwable {\n        \n    }\n});\n```\n\n另一种XposedBridge.hookMethod\n```java\npublic void handleLoadPackage(final XC_LoadPackage.LoadPackageParam loadPackageParam) throws Throwable {\n        if(loadPackageParam.packageName.equals(targetPackageName)){\n            Class<?> clazz = XposedHelpers.findClass(targetClassName,loadPackageParam.classLoader);\n            final Method[] declareMethods = clazz.getDeclaredMethods();\n            for(Method method : declareMethods){\n              // find your target method\n              XposedBridge.hookMethod(targetMethod,new XC_MethodHook() {\n                @Override\n                 protected void beforeHookedMethod(MethodHookParam param) throws Throwable {\n        \n                 }\n              })\n            }\n        }\n}\n\n```","hide":"","time":"2020-09-02T08:54:22.000Z"}