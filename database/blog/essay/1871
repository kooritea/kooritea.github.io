{"id":1871,"content":"@types/ws不知道为什么不把客户端连接生成的socket对象的类型导出来\n\n导致用的时候像onmessage这些能拿到event.target拿到这个socket却无法传递\n```javascript\nserver.on('connection', (socket) => {\n    // typeof socket === Websocket\n    // 但是这个Websocket类型却没有被ws的.d.ts导出来\n    // 导致外面的方法没办法声明参数类型\n    saveSocket(socket)\n})\n\nfunction saveSocket(socket:Websocket){// ws包没有Websocket这个类型\n\n}\n\n```\n\n用一个别名曲线救国\n\n```javascript\ntype Pick2Type<T, K extends keyof T> = T[K]\n\nfunction saveSocket(socket: Pick2Type<MessageEvent, 'target'>){// ws包有MessageEvent这个类型,通过这个接口拿Websocket类型\n\n}\n\n```\n\n--- \n草,直接MessageEvent['target']就行了\n```javascript\ntype Socket = MessageEvent['target']\n```","hide":"","time":"2020-04-01T13:27:29.000Z"}