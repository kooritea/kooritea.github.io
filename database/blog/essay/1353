{"id":1353,"content":"搞定了openvpn分配固定ip的问题\n\n为什么要分配固定ip\n> 透明代理需要\n\n首先openvpn服务端的配置文件中添加一个client-config-dir的配置项\n在openwrt中有两个方法\n一个是直接修改config\n```bash\n#/etc/config/openvpn\nconfig openvpn 'myvpn'\n   ....\n   option client_config_dir '/etc/openvpn/client-config'\n```\n另一个是使用uci\n```bash\nuci set openvpn.myvpn.client_config_dir=/etc/openvpn/client-config\n#如果不commit的话就是暂存,不会写入上面的配置文件,但是也会生效\nuci commit\n```\n然后创建上面指定的文件夹/etc/openvpn/client-config\n```bash\nmkdir /etc/openvpn/client-config\n```\n然后根据客户端的用户名,也就是颁发证书时那个名字创建文件\n比如用户名是client1\n那么就\n```bash\ntouch /etc/openvpn/client-config/client1\n```\n然后在 /etc/openvpn/client-config/client1 写入\n```bash\n #/etc/openvpn/client-config/client1\nifconfig-push 192.168.14.2 255.255.255.0\n```\n192.168.14.2就是要设置给客户端client1的固定ip,后面就是掩码","hide":"","time":"2019-11-25T05:08:48.000Z"}