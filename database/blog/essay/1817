{"id":1817,"content":"这个CubismSDK的问题有点多\n之前就感觉不对堇,现在越看越有问题\n举个例子\n\n```javascript\nfunction startMotion(){\n    let motion: CubismMotion = <CubismMotion>this._motions.getValue(name);\n    let autoDelete = false\n    // 这里大概就是先从预先加载的motion集合(_motions)中查找目标motion,没有的话就通过fetch在线获取\n    // 在线获取的motion使autodelete=true,指示_motionManager播放完后删除\n    // 最后通过_motionManager.startMotionPriority播放\n    // 本来没有autoDelete还可以解释成遇到没加载的motion马上获取不执行,但是这个autoDelete变量明显的意图就是在线获取之后马上执行\n    // 很明显,这里如果是异步获取motion的话,fetch的then都没开始就调用this._motionManager.startMotionPriority了\n    // 这个写在then里面的autoDelete毫无作用\n    if(motion === null){\n        fetch(path).then((response)=>{\n            return response.arrayBuffer();\n        }).then((buffer)=>{\n            // .....\n            autoDelete = true\n        })\n    }\n    return this._motionManager.startMotionPriority(\n            motion,\n            autoDelete,\n            priority\n     );\n}\n\n```\n\n明天让我去上班.jpg\n\n这个4.0jsSDK还没有自带播放音频了,反而上一版有(虽然就算有也要重写","hide":"","time":"2020-03-13T09:08:27.000Z"}